(()=>{"use strict";class e{constructor(){this.toLoad=0,this.loaded=0,this.isLoaded=!1,this.list={}}load(e){const t=["png"],s=["json"],i=["toml"];return this.toLoad=e.length,new Promise((h=>{e.forEach((e=>{const r=e.split(".").pop()||"";t.includes(r)?this.loadImage(e,h):s.includes(r)?this.loadJson(e,h):i.includes(r)&&this.loadConfig(e,h)}))}))}loadHandler(e){this.loaded+=1,this.loaded===this.toLoad&&(this.loaded=0,this.toLoad=0,e(this),this.isLoaded=!0)}loadImage(e,t){const s=new Image;s.src=e,s.addEventListener("load",(()=>{this.loadHandler(t)}),!1);const i=e.split("/").pop().split(".")[0];i&&(this.list[i]=s)}async loadConfig(e,t){fetch(e).then((e=>e.text())).then((t=>{const s=t.split("\n").reduce(((e,t)=>{const[s,i]=t.trim().split("=");return s&&i?(e[s.trim()]=i.trim(),e):e}),{}),i=e.split("/").pop().split(".")[0];i&&(this.list[i]=s)}))}async loadJson(e,t){try{const s=await fetch(e),i=await s.json();this.loadHandler(t);const h=e.split("/").pop().split(".")[0];this.list[h]=i}catch(e){}}}const t=["KeyW","KeyA","KeyS","KeyD","Space","Escape","KeyI","KeyJ","KeyK","KeyL"];class s{constructor(e){this.keys={},console.log("Controller created"),this.game=e,this.player=e.level.player,window.addEventListener("keydown",(e=>this.handleKeyDown(e))),window.addEventListener("keyup",(e=>this.handleKeyUp(e)))}handleKeyDown(e){t.includes(e.code)&&(e.preventDefault(),this.keys[e.code]=1)}handleKeyUp(e){this.keys[e.code]=0}keyIsDown(e){return 1===this.keys[e]||!1}clearKeys(){this.keys={}}}class i{constructor(e,t){this.x=e,this.y=t}add(e){return this.x+=e.x,this.y+=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}mul(e){return this.x*=e.x,this.y*=e.y,this}div(e){return this.x/=e.x,this.y/=e.y,this}clone(){return new i(this.x,this.y)}reset(){return this.x=0,this.y=0,this}}class h{constructor(){this.pos=new i(0,0),this.globalPos=new i(0,0),this.vel=new i(0,0),this.size=new i(8,8),this.rotation=0,this.speed=1,this.children=[],this.parent=null,this.id=Math.random().toString(16).substring(0,5)}addChild(e){this.children.includes(e)||(e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e))}removeChild(e){e.parent=null,this.children=this.children.filter((t=>t!==e))}debugDraw(e,t=!1){e.ctx.strokeStyle="magenta",e.ctx.strokeRect(this.pos.x,this.pos.y,this.size.x,this.size.y),t&&(e.ctx.strokeStyle="green",e.ctx.font="8px monospace",e.ctx.strokeText(this.id,this.pos.x,this.pos.y-4))}update(e){this.children.forEach((t=>{t.update(e)}))}render(e){this.children.forEach((t=>{t.render(e)})),this.debugDraw(e)}isOutOfParent(e){return e.clone().add(new i(this.size.x,0)).x>=this.parent.size.x+this.parent.pos.x||e.clone().add(new i(0,this.size.y)).y>=this.parent.size.y+this.parent.pos.y||e.x<=this.parent.pos.x||e.y<=this.parent.pos.y}}class r{constructor(){this.health=100,this.exp=0,this.level=1,this.damage=10,this.speed=1,this.defense=1}}const n={game:null,moveDisabled:!1};const a={basic:{damage:10,speed:5,color:"red",size:[2,2],rechargeTime:50}};var o;!function(e){e.Basic="basic"}(o||(o={}));class l extends h{constructor(e,t,s){super(),this.pos=e,this.vel=t,this.type=s,this.size=new i(a[this.type].size[0],a[this.type].size[1]),this.id="player-bullet"}update(e){this.pos.add(this.vel.clone().mul(new i(a[this.type].speed,a[this.type].speed)))}render(e){e.ctx.save(),this.debugDraw(e),e.ctx.fillStyle=a[this.type].color,e.ctx.fillRect(this.pos.x,this.pos.y,2,2),e.ctx.restore()}}class d extends h{constructor(){super(),this.stats=new r,this.bullets=[],this.recharged=0,this.id="player",this.size=new i(16,16),this.pos=new i(127.5-this.size.x,120-this.size.y),this.stats.health=50,this.speed=2}fire(e,t){if(this.recharged>a.basic.rechargeTime){let t=new i(this.pos.x,this.pos.y+16),s=new i(this.pos.x+14,this.pos.y+16);0===e.y&&(t=new i(this.pos.x,this.pos.y),s=new i(this.pos.x,this.pos.y+14));const h=new l(t,e,o.Basic);this.bullets.push(h);const r=new l(s,e,o.Basic);this.bullets.push(r)}this.recharged=0}move(e){if(n.moveDisabled)return;const t=this.pos.clone(),s=this.pos.clone().add(e.mul(new i(this.speed,this.speed)));this.isOutOfParent(s)||(this.pos=s,s.x<=50&&(this.pos=t,this.parent.pos.x+=this.speed),s.y<=50&&(this.pos=t,this.parent.pos.y+=this.speed),s.clone().add(new i(this.size.x,0)).x>=n.game.renderer.windowSize.width-50&&(this.pos=t,this.parent.pos.x-=this.speed),s.clone().add(new i(0,this.size.y)).y>=n.game.renderer.windowSize.height-50&&(this.pos=t,this.parent.pos.y-=this.speed))}update(e){this.recharged+=e,this.bullets.forEach((t=>{t.update(e)}))}render(e){e.ctx.save(),e.drawSprite(0,24,16,16,this.pos.x,this.pos.y,16,16),this.bullets.forEach((t=>{t.render(e)})),this.bullets=this.bullets.filter((t=>{return s=t,i=e.canvas.width,h=e.canvas.height,!(s.pos.x<0||s.pos.x>i||s.pos.y<0||s.pos.y>h);var s,i,h})),this.debugDraw(e),e.ctx.restore()}}const c=["yellowgreen","pink"];class p extends h{constructor(e){super(),this.player=null,this.map=[],this.size=e.size,this.pos=e.pos,this.map=Array(e.size.x*e.size.y).fill(0),this.map.forEach(((e,t)=>{this.map[t]=Math.trunc(Math.random()*c.length)}))}renderMap(e){const t=16;for(let s=0;s<this.size.x/t;s++)for(let i=0;i<this.size.y/t;i++){const h=c[this.map[s+i*(this.size.x/t)]];e.ctx.fillStyle=h,e.ctx.fillRect(this.pos.x+s*t,this.pos.y+i*t,t,t)}}render(e){this.renderMap(e),this.player?.render(e),this.children.forEach((t=>{t.render(e)})),this.debugDraw(e)}}const w={size:new i(512,512),pos:new i(-200,-200),map:[]};class y extends h{constructor(){super(),this.scene=new p(w),this.player=new d,this.scene.addChild(this.player)}update(e){this.scene?.update(e)}addScene(e){this.scene=e}render(e){this.scene?.render(e)}}class u{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info("â„¹ï¸ "+e)}debug(e){console.log("ðŸ“ "+e)}}class x{constructor(){this.logger=new u,this.image=new Image,this.windowSize={width:256,height:240},this.spriteSheetMap={},this.canvas=document.createElement("canvas"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.ctx.scale(this.canvas.width/this.windowSize.width,this.canvas.height/this.windowSize.height),document.querySelector("#main").append(this.canvas),this.logger.info("Renderer initialized"),window.addEventListener("resize",(()=>this.resize()))}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx.scale(this.canvas.width/this.windowSize.width,this.canvas.height/this.windowSize.height),this.ctx.imageSmoothingEnabled=!1}drawSprite(e,t,s,i,h,r,n,a){this.ctx.drawImage(this.image,e,t,s,i,h,r,n,a)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}const g="#000000",m="#ffffff",f="#49aa10",v="#b21030";class S extends x{progress(e,t,s,i=10,h=4){this.ctx.fillStyle=m,this.ctx.fillRect(t-2,s-2,i+4,h+4),this.ctx.fillStyle=m,this.ctx.fillRect(t+i+2,s+1,1,2),this.ctx.fillStyle=g,this.ctx.fillRect(t-1,s-1,i+2,h+2),this.ctx.fillStyle=v,this.ctx.fillRect(t,s,i,4),this.ctx.fillStyle=f,this.ctx.fillRect(t,s,e/i,4)}text(e,t,s){e.split("").forEach(((e,t)=>{this.ctx.drawImage(this.image,this.spriteSheetMap[e].x,this.spriteSheetMap[e].y,this.spriteSheetMap[e].w,this.spriteSheetMap[e].h,8*t,0,8,8)}))}}var z;!function(e){e[e.MENU=0]="MENU",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED",e[e.GAME_OVER=3]="GAME_OVER",e[e.OPTIONS=4]="OPTIONS",e[e.LOADING=5]="LOADING",e[e.FLYING=6]="FLYING",e[e.DISEMBARK=7]="DISEMBARK"}(z||(z={}));const D=new class{constructor(){this.renderer=new x,this.uiRenderer=new S,this.assetLoader=new e,this.level=new y,this.currentState=z.LOADING,this.lastTime=0,this.logger=new u,this.logger.info("Game started"),this.controller=new s(this),window.game=this}update(e){const t=e-this.lastTime;this.controller.keyIsDown("KeyW")&&this.level.player.move(new i(0,-1)),this.controller.keyIsDown("KeyA")&&this.level.player.move(new i(-1,0)),this.controller.keyIsDown("KeyS")&&this.level.player.move(new i(0,1)),this.controller.keyIsDown("KeyD")&&this.level.player.move(new i(1,0)),this.controller.keyIsDown("KeyI")&&this.level.player.fire(new i(0,-1),t),this.controller.keyIsDown("KeyJ")&&this.level.player.fire(new i(-1,0),t),this.controller.keyIsDown("KeyK")&&this.level.player.fire(new i(0,1),t),this.controller.keyIsDown("KeyL")&&this.level.player.fire(new i(1,0),t),this.lastTime=e,this.level.update(t)}changeState(e){this.currentState=e}render(){this.renderer.clear(),this.uiRenderer.clear(),this.uiRenderer.progress(this.level.player.stats.health,this.renderer.windowSize.width-28,8),this.level.render(this.renderer)}run(){this.logger.info("Game running"),this.assetLoader.load(["assets/spritesheet.png","assets/spritesheet_map.json"]).then((()=>{this.logger.info("Assets loaded"),this.renderer.image=this.assetLoader.list.spritesheet,this.uiRenderer.image=this.assetLoader.list.spritesheet,this.uiRenderer.spriteSheetMap=this.assetLoader.list.spritesheet_map,n.game=this,this.loop()}))}loop(){this.update(performance.now()),this.render(),requestAnimationFrame((()=>this.loop()))}};D.run()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNyQyxHQ3RGSnZKLEVBQUtzSixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL2Fzc2V0bG9hZGVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9jb250cm9sbGVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy92ZWN0b3IyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9nYW1lb2JqZWN0LnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9zdGF0ZS50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvcGxheWVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvc2NlbmUudHMiLCJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL2xldmVsLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9sb2dnZXIudHMiLCJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL3JlbmRlcmVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy91aS1yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvZ2FtZS50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9AdHMtbm9jaGVja1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXNzZXRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRvTG9hZCA9IDA7XG4gICAgICAgIHRoaXMubG9hZGVkID0gMDtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxpc3QgPSB7fTtcbiAgICB9XG4gICAgbG9hZChhc3NldHMpIHtcbiAgICAgICAgY29uc3QgaW1hZ2VFeHQgPSBbXCJwbmdcIl07XG4gICAgICAgIGNvbnN0IGpzb25FeHQgPSBbXCJqc29uXCJdO1xuICAgICAgICBjb25zdCBjb25maWdFeHQgPSBbXCJ0b21sXCJdO1xuICAgICAgICB0aGlzLnRvTG9hZCA9IGFzc2V0cy5sZW5ndGg7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgYXNzZXRzLmZvckVhY2goKGFzc2V0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gYXNzZXQuc3BsaXQoXCIuXCIpLnBvcCgpIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlRXh0LmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UoYXNzZXQsIHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChqc29uRXh0LmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSnNvbihhc3NldCwgcmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZ0V4dC5pbmNsdWRlcyhleHRlbnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZENvbmZpZyhhc3NldCwgcmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsb2FkSGFuZGxlcihyZXNvbHZlKSB7XG4gICAgICAgIHRoaXMubG9hZGVkICs9IDE7XG4gICAgICAgIGlmICh0aGlzLmxvYWRlZCA9PT0gdGhpcy50b0xvYWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGVkID0gMDtcbiAgICAgICAgICAgIHRoaXMudG9Mb2FkID0gMDtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2FkSW1hZ2Uoc3JjLCByZXNvbHZlKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlLnNyYyA9IHNyYztcbiAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkSGFuZGxlcihyZXNvbHZlKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICBjb25zdCBuYW1lID0gc3JjLnNwbGl0KFwiL1wiKS5wb3AoKS5zcGxpdChcIi5cIilbMF07XG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RbbmFtZV0gPSBpbWFnZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBsb2FkQ29uZmlnKHNyYywgcmVzb2x2ZSkge1xuICAgICAgICBmZXRjaChzcmMpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gZGF0YS50ZXh0KCkpXG4gICAgICAgICAgICAudGhlbigodGV4dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGV4dC5zcGxpdChcIlxcblwiKS5yZWR1Y2UoKG9iaiwgc3RyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gc3RyLnRyaW0oKS5zcGxpdChcIj1cIik7XG4gICAgICAgICAgICAgICAgaWYgKCFrZXkgfHwgIXZhbHVlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgICAgIG9ialtrZXkudHJpbSgpXSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNyYy5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCIuXCIpWzBdO1xuICAgICAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RbbmFtZV0gPSBjb25maWc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBsb2FkSnNvbihzcmMsIHJlc29sdmUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goc3JjKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICB0aGlzLmxvYWRIYW5kbGVyKHJlc29sdmUpO1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNyYy5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCIuXCIpWzBdO1xuICAgICAgICAgICAgdGhpcy5saXN0W25hbWVdID0gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHsgfVxuICAgIH1cbn1cbiIsImNvbnN0IGFwcHJvdmVkS2V5cyA9IFtcbiAgICBcIktleVdcIixcbiAgICBcIktleUFcIixcbiAgICBcIktleVNcIixcbiAgICBcIktleURcIixcbiAgICBcIlNwYWNlXCIsXG4gICAgXCJFc2NhcGVcIixcbiAgICBcIktleUlcIixcbiAgICBcIktleUpcIixcbiAgICBcIktleUtcIixcbiAgICBcIktleUxcIixcbl07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XG4gICAgICAgIHRoaXMua2V5cyA9IHt9O1xuICAgICAgICBjb25zb2xlLmxvZyhcIkNvbnRyb2xsZXIgY3JlYXRlZFwiKTtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBnYW1lLmxldmVsLnBsYXllcjtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB0aGlzLmhhbmRsZUtleURvd24oZSkpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChlKSA9PiB0aGlzLmhhbmRsZUtleVVwKGUpKTtcbiAgICB9XG4gICAgaGFuZGxlS2V5RG93bihlKSB7XG4gICAgICAgIGlmICghYXBwcm92ZWRLZXlzLmluY2x1ZGVzKGUuY29kZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMua2V5c1tlLmNvZGVdID0gMTtcbiAgICB9XG4gICAgaGFuZGxlS2V5VXAoZSkge1xuICAgICAgICB0aGlzLmtleXNbZS5jb2RlXSA9IDA7XG4gICAgfVxuICAgIGtleUlzRG93bihrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5c1trZXldID09PSAxIHx8IGZhbHNlO1xuICAgIH1cbiAgICBjbGVhcktleXMoKSB7XG4gICAgICAgIHRoaXMua2V5cyA9IHt9O1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlY3RvcjIge1xuICAgIGNvbnN0cnVjdG9yKHgsIHkpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG4gICAgYWRkKHYpIHtcbiAgICAgICAgdGhpcy54ICs9IHYueDtcbiAgICAgICAgdGhpcy55ICs9IHYueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHN1Yih2KSB7XG4gICAgICAgIHRoaXMueCAtPSB2Lng7XG4gICAgICAgIHRoaXMueSAtPSB2Lnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBtdWwodikge1xuICAgICAgICB0aGlzLnggKj0gdi54O1xuICAgICAgICB0aGlzLnkgKj0gdi55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGl2KHYpIHtcbiAgICAgICAgdGhpcy54IC89IHYueDtcbiAgICAgICAgdGhpcy55IC89IHYueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy54LCB0aGlzLnkpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy54ID0gMDtcbiAgICAgICAgdGhpcy55ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4vdmVjdG9yMlwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucG9zID0gbmV3IFZlY3RvcjIoMCwgMCk7XG4gICAgICAgIHRoaXMuZ2xvYmFsUG9zID0gbmV3IFZlY3RvcjIoMCwgMCk7XG4gICAgICAgIHRoaXMudmVsID0gbmV3IFZlY3RvcjIoMCwgMCk7XG4gICAgICAgIHRoaXMuc2l6ZSA9IG5ldyBWZWN0b3IyKDgsIDgpO1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5zcGVlZCA9IDE7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDAsIDUpO1xuICAgIH1cbiAgICBhZGRDaGlsZChjaGlsZCkge1xuICAgICAgICBpZiAodGhpcy5jaGlsZHJlbi5pbmNsdWRlcyhjaGlsZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGQucGFyZW50KSB7XG4gICAgICAgICAgICBjaGlsZC5wYXJlbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkLnBhcmVudCA9IHRoaXM7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgfVxuICAgIHJlbW92ZUNoaWxkKGNoaWxkKSB7XG4gICAgICAgIGNoaWxkLnBhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuLmZpbHRlcigoYykgPT4gYyAhPT0gY2hpbGQpO1xuICAgIH1cbiAgICBkZWJ1Z0RyYXcocmVuZGVyZXIsIGluZm8gPSBmYWxzZSkge1xuICAgICAgICByZW5kZXJlci5jdHguc3Ryb2tlU3R5bGUgPSBcIm1hZ2VudGFcIjtcbiAgICAgICAgcmVuZGVyZXIuY3R4LnN0cm9rZVJlY3QodGhpcy5wb3MueCwgdGhpcy5wb3MueSwgdGhpcy5zaXplLngsIHRoaXMuc2l6ZS55KTtcbiAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLmN0eC5zdHJva2VTdHlsZSA9IFwiZ3JlZW5cIjtcbiAgICAgICAgICAgIHJlbmRlcmVyLmN0eC5mb250ID0gXCI4cHggbW9ub3NwYWNlXCI7XG4gICAgICAgICAgICByZW5kZXJlci5jdHguc3Ryb2tlVGV4dCh0aGlzLmlkLCB0aGlzLnBvcy54LCB0aGlzLnBvcy55IC0gNCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgIGNoaWxkLnVwZGF0ZShkdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW5kZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgY2hpbGQucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGVidWdEcmF3KHJlbmRlcmVyKTtcbiAgICB9XG4gICAgaXNPdXRPZlBhcmVudChwb3MpIHtcbiAgICAgICAgcmV0dXJuIChwb3MuY2xvbmUoKS5hZGQobmV3IFZlY3RvcjIodGhpcy5zaXplLngsIDApKS54ID49XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zaXplLnggKyB0aGlzLnBhcmVudC5wb3MueCB8fFxuICAgICAgICAgICAgcG9zLmNsb25lKCkuYWRkKG5ldyBWZWN0b3IyKDAsIHRoaXMuc2l6ZS55KSkueSA+PVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNpemUueSArIHRoaXMucGFyZW50LnBvcy55IHx8XG4gICAgICAgICAgICBwb3MueCA8PSB0aGlzLnBhcmVudC5wb3MueCB8fFxuICAgICAgICAgICAgcG9zLnkgPD0gdGhpcy5wYXJlbnQucG9zLnkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTdGF0cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGVhbHRoID0gMTAwO1xuICAgICAgICB0aGlzLmV4cCA9IDA7XG4gICAgICAgIHRoaXMubGV2ZWwgPSAxO1xuICAgICAgICB0aGlzLmRhbWFnZSA9IDEwO1xuICAgICAgICB0aGlzLnNwZWVkID0gMTtcbiAgICAgICAgdGhpcy5kZWZlbnNlID0gMTtcbiAgICB9XG59XG4iLCJjb25zdCBzdGF0ZSA9IHtcbiAgICBnYW1lOiBudWxsLFxuICAgIG1vdmVEaXNhYmxlZDogZmFsc2UsXG59O1xuZXhwb3J0IGRlZmF1bHQgc3RhdGU7XG4iLCJpbXBvcnQgR2FtZU9iamVjdCwgeyBTdGF0cyB9IGZyb20gXCIuL2dhbWVvYmplY3RcIjtcbmltcG9ydCBzdGF0ZSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IHsgaXNPdXRPZlNjcmVlbiB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5jb25zdCB3ZWFwb25UeXBlcyA9IHtcbiAgICBiYXNpYzoge1xuICAgICAgICBkYW1hZ2U6IDEwLFxuICAgICAgICBzcGVlZDogNSxcbiAgICAgICAgY29sb3I6IFwicmVkXCIsXG4gICAgICAgIHNpemU6IFsyLCAyXSxcbiAgICAgICAgcmVjaGFyZ2VUaW1lOiA1MCxcbiAgICB9LFxufTtcbnZhciBXZWFwb25UeXBlO1xuKGZ1bmN0aW9uIChXZWFwb25UeXBlKSB7XG4gICAgV2VhcG9uVHlwZVtcIkJhc2ljXCJdID0gXCJiYXNpY1wiO1xufSkoV2VhcG9uVHlwZSB8fCAoV2VhcG9uVHlwZSA9IHt9KSk7XG5leHBvcnQgY2xhc3MgQnVsbGV0IGV4dGVuZHMgR2FtZU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocG9zLCB2ZWwsIHR5cGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMudmVsID0gdmVsO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnNpemUgPSBuZXcgVmVjdG9yMih3ZWFwb25UeXBlc1t0aGlzLnR5cGVdLnNpemVbMF0sIHdlYXBvblR5cGVzW3RoaXMudHlwZV0uc2l6ZVsxXSk7XG4gICAgICAgIHRoaXMuaWQgPSBcInBsYXllci1idWxsZXRcIjtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMucG9zLmFkZCh0aGlzLnZlbFxuICAgICAgICAgICAgLmNsb25lKClcbiAgICAgICAgICAgIC5tdWwobmV3IFZlY3RvcjIod2VhcG9uVHlwZXNbdGhpcy50eXBlXS5zcGVlZCwgd2VhcG9uVHlwZXNbdGhpcy50eXBlXS5zcGVlZCkpKTtcbiAgICB9XG4gICAgcmVuZGVyKHJlbmRlcmVyKSB7XG4gICAgICAgIHJlbmRlcmVyLmN0eC5zYXZlKCk7XG4gICAgICAgIHRoaXMuZGVidWdEcmF3KHJlbmRlcmVyKTtcbiAgICAgICAgcmVuZGVyZXIuY3R4LmZpbGxTdHlsZSA9IHdlYXBvblR5cGVzW3RoaXMudHlwZV0uY29sb3I7XG4gICAgICAgIHJlbmRlcmVyLmN0eC5maWxsUmVjdCh0aGlzLnBvcy54LCB0aGlzLnBvcy55LCAyLCAyKTtcbiAgICAgICAgcmVuZGVyZXIuY3R4LnJlc3RvcmUoKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBHYW1lT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0cyA9IG5ldyBTdGF0cygpO1xuICAgICAgICB0aGlzLmJ1bGxldHMgPSBbXTtcbiAgICAgICAgdGhpcy5yZWNoYXJnZWQgPSAwO1xuICAgICAgICB0aGlzLmlkID0gXCJwbGF5ZXJcIjtcbiAgICAgICAgdGhpcy5zaXplID0gbmV3IFZlY3RvcjIoMTYsIDE2KTtcbiAgICAgICAgdGhpcy5wb3MgPSBuZXcgVmVjdG9yMigyNTUgLyAyIC0gdGhpcy5zaXplLngsIDI0MCAvIDIgLSB0aGlzLnNpemUueSk7XG4gICAgICAgIHRoaXMuc3RhdHMuaGVhbHRoID0gNTA7XG4gICAgICAgIHRoaXMuc3BlZWQgPSAyO1xuICAgIH1cbiAgICBmaXJlKGRpcmVjdGlvbiwgZHQpIHtcbiAgICAgICAgaWYgKHRoaXMucmVjaGFyZ2VkID4gd2VhcG9uVHlwZXMuYmFzaWMucmVjaGFyZ2VUaW1lKSB7XG4gICAgICAgICAgICBsZXQgbGVmdEd1blBvcyA9IG5ldyBWZWN0b3IyKHRoaXMucG9zLngsIHRoaXMucG9zLnkgKyAxNik7XG4gICAgICAgICAgICBsZXQgcmlnaHRHdW5Qb3MgPSBuZXcgVmVjdG9yMih0aGlzLnBvcy54ICsgMTQsIHRoaXMucG9zLnkgKyAxNik7XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uLnkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBsZWZ0R3VuUG9zID0gbmV3IFZlY3RvcjIodGhpcy5wb3MueCwgdGhpcy5wb3MueSk7XG4gICAgICAgICAgICAgICAgcmlnaHRHdW5Qb3MgPSBuZXcgVmVjdG9yMih0aGlzLnBvcy54LCB0aGlzLnBvcy55ICsgMTQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVmdEJ1bGxldCA9IG5ldyBCdWxsZXQobGVmdEd1blBvcywgZGlyZWN0aW9uLCBXZWFwb25UeXBlLkJhc2ljKTtcbiAgICAgICAgICAgIHRoaXMuYnVsbGV0cy5wdXNoKGxlZnRCdWxsZXQpO1xuICAgICAgICAgICAgY29uc3QgYnVsbGV0ID0gbmV3IEJ1bGxldChyaWdodEd1blBvcywgZGlyZWN0aW9uLCBXZWFwb25UeXBlLkJhc2ljKTtcbiAgICAgICAgICAgIHRoaXMuYnVsbGV0cy5wdXNoKGJ1bGxldCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWNoYXJnZWQgPSAwO1xuICAgIH1cbiAgICBtb3ZlKGRpcmVjdGlvbikge1xuICAgICAgICBpZiAoc3RhdGUubW92ZURpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkUG9zID0gdGhpcy5wb3MuY2xvbmUoKTtcbiAgICAgICAgY29uc3QgbmV3UG9zID0gdGhpcy5wb3NcbiAgICAgICAgICAgIC5jbG9uZSgpXG4gICAgICAgICAgICAuYWRkKGRpcmVjdGlvbi5tdWwobmV3IFZlY3RvcjIodGhpcy5zcGVlZCwgdGhpcy5zcGVlZCkpKTtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSA1MDtcbiAgICAgICAgaWYgKHRoaXMuaXNPdXRPZlBhcmVudChuZXdQb3MpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IG5ld1BvcztcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLnggPD0gZGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gb2xkUG9zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucG9zLnggKz0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLnkgPD0gZGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gb2xkUG9zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucG9zLnkgKz0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLmNsb25lKCkuYWRkKG5ldyBWZWN0b3IyKHRoaXMuc2l6ZS54LCAwKSkueCA+PVxuICAgICAgICAgICAgc3RhdGUuZ2FtZS5yZW5kZXJlci53aW5kb3dTaXplLndpZHRoIC0gNTApIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gb2xkUG9zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucG9zLnggLT0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLmNsb25lKCkuYWRkKG5ldyBWZWN0b3IyKDAsIHRoaXMuc2l6ZS55KSkueSA+PVxuICAgICAgICAgICAgc3RhdGUuZ2FtZS5yZW5kZXJlci53aW5kb3dTaXplLmhlaWdodCAtIDUwKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IG9sZFBvcztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnBvcy55IC09IHRoaXMuc3BlZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMucmVjaGFyZ2VkICs9IGR0O1xuICAgICAgICB0aGlzLmJ1bGxldHMuZm9yRWFjaCgoYnVsbGV0KSA9PiB7XG4gICAgICAgICAgICBidWxsZXQudXBkYXRlKGR0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlcihyZW5kZXJlcikge1xuICAgICAgICByZW5kZXJlci5jdHguc2F2ZSgpO1xuICAgICAgICByZW5kZXJlci5kcmF3U3ByaXRlKDAsIDI0LCAxNiwgMTYsIHRoaXMucG9zLngsIHRoaXMucG9zLnksIDE2LCAxNik7XG4gICAgICAgIHRoaXMuYnVsbGV0cy5mb3JFYWNoKChidWxsZXQpID0+IHtcbiAgICAgICAgICAgIGJ1bGxldC5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5idWxsZXRzID0gdGhpcy5idWxsZXRzLmZpbHRlcigoYnVsbGV0KSA9PiAhaXNPdXRPZlNjcmVlbihidWxsZXQsIHJlbmRlcmVyLmNhbnZhcy53aWR0aCwgcmVuZGVyZXIuY2FudmFzLmhlaWdodCkpO1xuICAgICAgICB0aGlzLmRlYnVnRHJhdyhyZW5kZXJlcik7XG4gICAgICAgIHJlbmRlcmVyLmN0eC5yZXN0b3JlKCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGlzQ29sbGlkZShhLCBiKSB7XG4gICAgcmV0dXJuIChhLnBvcy54IDwgYi5wb3MueCArIGIuc2l6ZS54ICYmXG4gICAgICAgIGEucG9zLnggKyBhLnNpemUueCA+IGIucG9zLnggJiZcbiAgICAgICAgYS5wb3MueSA8IGIucG9zLnkgKyBiLnNpemUueSAmJlxuICAgICAgICBhLnBvcy55ICsgYS5zaXplLnkgPiBiLnBvcy55KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc091dE9mU2NyZWVuKG9iaiwgd2lkdGgsIGhlaWdodCkge1xuICAgIHJldHVybiAob2JqLnBvcy54IDwgMCB8fFxuICAgICAgICBvYmoucG9zLnggPiB3aWR0aCB8fFxuICAgICAgICBvYmoucG9zLnkgPCAwIHx8XG4gICAgICAgIG9iai5wb3MueSA+IGhlaWdodCk7XG59XG4iLCJpbXBvcnQgR2FtZU9iamVjdCBmcm9tIFwiLi9nYW1lb2JqZWN0XCI7XG5jb25zdCB0aWxlcyA9IFtcInllbGxvd2dyZWVuXCIsIFwicGlua1wiXTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjZW5lIGV4dGVuZHMgR2FtZU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IobGV2ZWxEYXRhKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucGxheWVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5tYXAgPSBbXTtcbiAgICAgICAgdGhpcy5zaXplID0gbGV2ZWxEYXRhLnNpemU7XG4gICAgICAgIHRoaXMucG9zID0gbGV2ZWxEYXRhLnBvcztcbiAgICAgICAgLy90aGlzLm1hcCA9IGxldmVsRGF0YS5tYXA7XG4gICAgICAgIHRoaXMubWFwID0gQXJyYXkobGV2ZWxEYXRhLnNpemUueCAqIGxldmVsRGF0YS5zaXplLnkpLmZpbGwoMCk7XG4gICAgICAgIHRoaXMubWFwLmZvckVhY2goKF8sIGkpID0+IHtcbiAgICAgICAgICAgIHRoaXMubWFwW2ldID0gTWF0aC50cnVuYyhNYXRoLnJhbmRvbSgpICogdGlsZXMubGVuZ3RoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlck1hcChyZW5kZXJlcikge1xuICAgICAgICBjb25zdCB0aWxlU2l6ZSA9IDE2O1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuc2l6ZS54IC8gdGlsZVNpemU7IHgrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnNpemUueSAvIHRpbGVTaXplOyB5KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aWxlID0gdGlsZXNbdGhpcy5tYXBbeCArIHkgKiAodGhpcy5zaXplLnggLyB0aWxlU2l6ZSldXTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5jdHguZmlsbFN0eWxlID0gdGlsZTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5jdHguZmlsbFJlY3QodGhpcy5wb3MueCArIHggKiB0aWxlU2l6ZSwgdGhpcy5wb3MueSArIHkgKiB0aWxlU2l6ZSwgdGlsZVNpemUsIHRpbGVTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJNYXAocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLnBsYXllcj8ucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgY2hpbGQucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGVidWdEcmF3KHJlbmRlcmVyKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgR2FtZU9iamVjdCBmcm9tIFwiLi9nYW1lb2JqZWN0XCI7XG5pbXBvcnQgUGxheWVyIGZyb20gXCIuL3BsYXllclwiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuL3NjZW5lXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5jb25zdCBsZXZlbERhdGEgPSB7XG4gICAgc2l6ZTogbmV3IFZlY3RvcjIoMTYgKiAzMiwgMTYgKiAzMiksXG4gICAgcG9zOiBuZXcgVmVjdG9yMigtMjAwLCAtMjAwKSxcbiAgICBtYXA6IFtdLFxufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExldmVsIGV4dGVuZHMgR2FtZU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBuZXcgU2NlbmUobGV2ZWxEYXRhKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG4gICAgICAgIHRoaXMuc2NlbmUuYWRkQ2hpbGQodGhpcy5wbGF5ZXIpO1xuICAgIH1cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgdGhpcy5zY2VuZT8udXBkYXRlKGR0KTtcbiAgICB9XG4gICAgYWRkU2NlbmUoc2NlbmUpIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIH1cbiAgICByZW5kZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5zY2VuZT8ucmVuZGVyKHJlbmRlcmVyKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dnZXIge1xuICAgIGVycm9yKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgd2FybihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICB9XG4gICAgaW5mbyhtZXNzYWdlKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIuKEue+4jyBcIiArIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBkZWJ1ZyhtZXNzYWdlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+TnSBcIiArIG1lc3NhZ2UpO1xuICAgIH1cbn1cbiIsImltcG9ydCBMb2dnZXIgZnJvbSBcIi4vbG9nZ2VyXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuICAgICAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHtcbiAgICAgICAgICAgIHdpZHRoOiAyNTYsXG4gICAgICAgICAgICBoZWlnaHQ6IDI0MCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zcHJpdGVTaGVldE1hcCA9IHt9O1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIHRoaXMuY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN0eC5zY2FsZSh0aGlzLmNhbnZhcy53aWR0aCAvIHRoaXMud2luZG93U2l6ZS53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0IC8gdGhpcy53aW5kb3dTaXplLmhlaWdodCk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpblwiKS5hcHBlbmQodGhpcy5jYW52YXMpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiUmVuZGVyZXIgaW5pdGlhbGl6ZWRcIik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHRoaXMucmVzaXplKCkpO1xuICAgIH1cbiAgICByZXNpemUoKSB7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdGhpcy5jdHguc2NhbGUodGhpcy5jYW52YXMud2lkdGggLyB0aGlzLndpbmRvd1NpemUud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCAvIHRoaXMud2luZG93U2l6ZS5oZWlnaHQpO1xuICAgICAgICB0aGlzLmN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZHJhd1Nwcml0ZSh0aWxlWCwgdGlsZVksIHcsIGgsIHgsIHksIHNpemVYLCBzaXplWSkge1xuICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgdGlsZVgsIHRpbGVZLCB3LCBoLCB4LCB5LCBzaXplWCwgc2l6ZVkpO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZW5kZXJlciBmcm9tIFwiLi9yZW5kZXJlclwiO1xuY29uc3QgcGFsZXR0ZSA9IHtcbiAgICAweDAwOiBcIiMwMDAwMDBcIixcbiAgICAweDAxOiBcIiNmZmZmZmZcIixcbiAgICAweDAyOiBcIiM0OWFhMTBcIixcbiAgICAweDA0OiBcIiNiMjEwMzBcIixcbn07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSVJlbmRlcmVyIGV4dGVuZHMgUmVuZGVyZXIge1xuICAgIHByb2dyZXNzKHBlcmNlbnQsIHgsIHksIHdpZHRoID0gMTAsIGhlaWdodCA9IDQpIHtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gcGFsZXR0ZVsweDAxXTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCAtIDIsIHkgLSAyLCB3aWR0aCArIDQsIGhlaWdodCArIDQpO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBwYWxldHRlWzB4MDFdO1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4ICsgd2lkdGggKyAyLCB5ICsgMSwgMSwgMik7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHBhbGV0dGVbMHgwMF07XG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KHggLSAxLCB5IC0gMSwgd2lkdGggKyAyLCBoZWlnaHQgKyAyKTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gcGFsZXR0ZVsweDA0XTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIDQpO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBwYWxldHRlWzB4MDJdO1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4LCB5LCBwZXJjZW50IC8gd2lkdGgsIDQpO1xuICAgIH1cbiAgICB0ZXh0KHRleHQsIHgsIHkpIHtcbiAgICAgICAgdGV4dC5zcGxpdChcIlwiKS5mb3JFYWNoKChjaGFyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIHRoaXMuc3ByaXRlU2hlZXRNYXBbY2hhcl0ueCwgdGhpcy5zcHJpdGVTaGVldE1hcFtjaGFyXS55LCB0aGlzLnNwcml0ZVNoZWV0TWFwW2NoYXJdLncsIHRoaXMuc3ByaXRlU2hlZXRNYXBbY2hhcl0uaCwgaW5kZXggKiA4LCAwLCA4LCA4KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IEFzc2V0TG9hZGVyIGZyb20gXCIuL2Fzc2V0bG9hZGVyXCI7XG5pbXBvcnQgQ29udHJvbGxlciBmcm9tIFwiLi9jb250cm9sbGVyXCI7XG5pbXBvcnQgTGV2ZWwgZnJvbSBcIi4vbGV2ZWxcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4vbG9nZ2VyXCI7XG5pbXBvcnQgUmVuZGVyZXIgZnJvbSBcIi4vcmVuZGVyZXJcIjtcbmltcG9ydCBzdGF0ZSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IFVJUmVuZGVyZXIgZnJvbSBcIi4vdWktcmVuZGVyZXJcIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuL3ZlY3RvcjJcIjtcbnZhciBHYW1lU3RhdGU7XG4oZnVuY3Rpb24gKEdhbWVTdGF0ZSkge1xuICAgIEdhbWVTdGF0ZVtHYW1lU3RhdGVbXCJNRU5VXCJdID0gMF0gPSBcIk1FTlVcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiUExBWUlOR1wiXSA9IDFdID0gXCJQTEFZSU5HXCI7XG4gICAgR2FtZVN0YXRlW0dhbWVTdGF0ZVtcIlBBVVNFRFwiXSA9IDJdID0gXCJQQVVTRURcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiR0FNRV9PVkVSXCJdID0gM10gPSBcIkdBTUVfT1ZFUlwiO1xuICAgIEdhbWVTdGF0ZVtHYW1lU3RhdGVbXCJPUFRJT05TXCJdID0gNF0gPSBcIk9QVElPTlNcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiTE9BRElOR1wiXSA9IDVdID0gXCJMT0FESU5HXCI7XG4gICAgR2FtZVN0YXRlW0dhbWVTdGF0ZVtcIkZMWUlOR1wiXSA9IDZdID0gXCJGTFlJTkdcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiRElTRU1CQVJLXCJdID0gN10gPSBcIkRJU0VNQkFSS1wiO1xufSkoR2FtZVN0YXRlIHx8IChHYW1lU3RhdGUgPSB7fSkpO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyID0gbmV3IFVJUmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy5hc3NldExvYWRlciA9IG5ldyBBc3NldExvYWRlcigpO1xuICAgICAgICB0aGlzLmxldmVsID0gbmV3IExldmVsKCk7XG4gICAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gR2FtZVN0YXRlLkxPQURJTkc7XG4gICAgICAgIHRoaXMubGFzdFRpbWUgPSAwO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIkdhbWUgc3RhcnRlZFwiKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXIodGhpcyk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgd2luZG93W1wiZ2FtZVwiXSA9IHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0cykge1xuICAgICAgICBjb25zdCBkdCA9IHRzIC0gdGhpcy5sYXN0VGltZTtcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlXXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5tb3ZlKG5ldyBWZWN0b3IyKDAsIC0xKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlBXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5tb3ZlKG5ldyBWZWN0b3IyKC0xLCAwKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlTXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5tb3ZlKG5ldyBWZWN0b3IyKDAsIDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyLmtleUlzRG93bihcIktleURcIikpIHtcbiAgICAgICAgICAgIHRoaXMubGV2ZWwucGxheWVyLm1vdmUobmV3IFZlY3RvcjIoMSwgMCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIua2V5SXNEb3duKFwiS2V5SVwiKSkge1xuICAgICAgICAgICAgdGhpcy5sZXZlbC5wbGF5ZXIuZmlyZShuZXcgVmVjdG9yMigwLCAtMSksIGR0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyLmtleUlzRG93bihcIktleUpcIikpIHtcbiAgICAgICAgICAgIHRoaXMubGV2ZWwucGxheWVyLmZpcmUobmV3IFZlY3RvcjIoLTEsIDApLCBkdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlLXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5maXJlKG5ldyBWZWN0b3IyKDAsIDEpLCBkdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlMXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5maXJlKG5ldyBWZWN0b3IyKDEsIDApLCBkdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0VGltZSA9IHRzO1xuICAgICAgICB0aGlzLmxldmVsLnVwZGF0ZShkdCk7XG4gICAgfVxuICAgIGNoYW5nZVN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5jbGVhcigpO1xuICAgICAgICB0aGlzLnVpUmVuZGVyZXIuY2xlYXIoKTtcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyLnByb2dyZXNzKHRoaXMubGV2ZWwucGxheWVyLnN0YXRzLmhlYWx0aCwgdGhpcy5yZW5kZXJlci53aW5kb3dTaXplLndpZHRoIC0gMjgsIDgpO1xuICAgICAgICB0aGlzLmxldmVsLnJlbmRlcih0aGlzLnJlbmRlcmVyKTtcbiAgICB9XG4gICAgcnVuKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiR2FtZSBydW5uaW5nXCIpO1xuICAgICAgICB0aGlzLmFzc2V0TG9hZGVyXG4gICAgICAgICAgICAubG9hZChbXCJhc3NldHMvc3ByaXRlc2hlZXQucG5nXCIsIFwiYXNzZXRzL3Nwcml0ZXNoZWV0X21hcC5qc29uXCJdKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIkFzc2V0cyBsb2FkZWRcIik7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmltYWdlID0gdGhpcy5hc3NldExvYWRlci5saXN0W1wic3ByaXRlc2hlZXRcIl07XG4gICAgICAgICAgICB0aGlzLnVpUmVuZGVyZXIuaW1hZ2UgPSB0aGlzLmFzc2V0TG9hZGVyLmxpc3RbXCJzcHJpdGVzaGVldFwiXTtcbiAgICAgICAgICAgIHRoaXMudWlSZW5kZXJlci5zcHJpdGVTaGVldE1hcCA9IHRoaXMuYXNzZXRMb2FkZXIubGlzdFtcInNwcml0ZXNoZWV0X21hcFwiXTtcbiAgICAgICAgICAgIHN0YXRlLmdhbWUgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5sb29wKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsb29wKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZShwZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3AoKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IEdhbWUgZnJvbSBcIi4vZ2FtZVwiO1xuY29uc3QgZ2FtZSA9IG5ldyBHYW1lKCk7XG5nYW1lLnJ1bigpO1xuIl0sIm5hbWVzIjpbIkFzc2V0TG9hZGVyIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwidG9Mb2FkIiwibG9hZGVkIiwiaXNMb2FkZWQiLCJsaXN0IiwibG9hZCIsImFzc2V0cyIsImltYWdlRXh0IiwianNvbkV4dCIsImNvbmZpZ0V4dCIsImxlbmd0aCIsIlByb21pc2UiLCJyZXNvbHZlIiwiZm9yRWFjaCIsImFzc2V0IiwiZXh0ZW5zaW9uIiwic3BsaXQiLCJwb3AiLCJpbmNsdWRlcyIsImxvYWRJbWFnZSIsImxvYWRKc29uIiwibG9hZENvbmZpZyIsImxvYWRIYW5kbGVyIiwic3JjIiwiaW1hZ2UiLCJJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJuYW1lIiwiYXN5bmMiLCJmZXRjaCIsInRoZW4iLCJkYXRhIiwidGV4dCIsImNvbmZpZyIsInJlZHVjZSIsIm9iaiIsInN0ciIsImtleSIsInZhbHVlIiwidHJpbSIsInJlc3BvbnNlIiwianNvbiIsImVycm9yIiwiYXBwcm92ZWRLZXlzIiwiQ29udHJvbGxlciIsImdhbWUiLCJrZXlzIiwiY29uc29sZSIsImxvZyIsInBsYXllciIsImxldmVsIiwid2luZG93IiwiZSIsImhhbmRsZUtleURvd24iLCJoYW5kbGVLZXlVcCIsImNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsImtleUlzRG93biIsImNsZWFyS2V5cyIsIlZlY3RvcjIiLCJ4IiwieSIsImFkZCIsInYiLCJzdWIiLCJtdWwiLCJkaXYiLCJjbG9uZSIsInJlc2V0IiwiR2FtZU9iamVjdCIsInBvcyIsImdsb2JhbFBvcyIsInZlbCIsInNpemUiLCJyb3RhdGlvbiIsInNwZWVkIiwiY2hpbGRyZW4iLCJwYXJlbnQiLCJpZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImFkZENoaWxkIiwiY2hpbGQiLCJyZW1vdmVDaGlsZCIsInB1c2giLCJmaWx0ZXIiLCJjIiwiZGVidWdEcmF3IiwicmVuZGVyZXIiLCJpbmZvIiwiY3R4Iiwic3Ryb2tlU3R5bGUiLCJzdHJva2VSZWN0IiwiZm9udCIsInN0cm9rZVRleHQiLCJ1cGRhdGUiLCJkdCIsInJlbmRlciIsImlzT3V0T2ZQYXJlbnQiLCJTdGF0cyIsImhlYWx0aCIsImV4cCIsImRhbWFnZSIsImRlZmVuc2UiLCJtb3ZlRGlzYWJsZWQiLCJ3ZWFwb25UeXBlcyIsImJhc2ljIiwiY29sb3IiLCJyZWNoYXJnZVRpbWUiLCJXZWFwb25UeXBlIiwiQnVsbGV0IiwidHlwZSIsInN1cGVyIiwic2F2ZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwicmVzdG9yZSIsIlBsYXllciIsInN0YXRzIiwiYnVsbGV0cyIsInJlY2hhcmdlZCIsImZpcmUiLCJkaXJlY3Rpb24iLCJsZWZ0R3VuUG9zIiwicmlnaHRHdW5Qb3MiLCJsZWZ0QnVsbGV0IiwiQmFzaWMiLCJidWxsZXQiLCJtb3ZlIiwib2xkUG9zIiwibmV3UG9zIiwiZHJhd1Nwcml0ZSIsIndpZHRoIiwiY2FudmFzIiwiaGVpZ2h0IiwidGlsZXMiLCJTY2VuZSIsImxldmVsRGF0YSIsIm1hcCIsIkFycmF5IiwiZmlsbCIsIl8iLCJpIiwidHJ1bmMiLCJyZW5kZXJNYXAiLCJ0aWxlU2l6ZSIsInRpbGUiLCJMZXZlbCIsInNjZW5lIiwiYWRkU2NlbmUiLCJMb2dnZXIiLCJtZXNzYWdlIiwid2FybiIsImRlYnVnIiwiUmVuZGVyZXIiLCJsb2dnZXIiLCJ3aW5kb3dTaXplIiwic3ByaXRlU2hlZXRNYXAiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJnZXRDb250ZXh0IiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwic2NhbGUiLCJxdWVyeVNlbGVjdG9yIiwiYXBwZW5kIiwicmVzaXplIiwidGlsZVgiLCJ0aWxlWSIsInciLCJoIiwic2l6ZVgiLCJzaXplWSIsImRyYXdJbWFnZSIsImNsZWFyIiwiY2xlYXJSZWN0IiwicGFsZXR0ZSIsIlVJUmVuZGVyZXIiLCJwcm9ncmVzcyIsInBlcmNlbnQiLCJjaGFyIiwiaW5kZXgiLCJHYW1lU3RhdGUiLCJ1aVJlbmRlcmVyIiwiYXNzZXRMb2FkZXIiLCJjdXJyZW50U3RhdGUiLCJMT0FESU5HIiwibGFzdFRpbWUiLCJjb250cm9sbGVyIiwidHMiLCJjaGFuZ2VTdGF0ZSIsInN0YXRlIiwicnVuIiwibG9vcCIsInBlcmZvcm1hbmNlIiwibm93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==