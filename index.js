(()=>{"use strict";class e{constructor(){this.toLoad=0,this.loaded=0,this.isLoaded=!1,this.list={}}load(e){const t=["png"],s=["json"],i=["toml"];return this.toLoad=e.length,new Promise((h=>{e.forEach((e=>{const r=e.split(".").pop()||"";t.includes(r)?this.loadImage(e,h):s.includes(r)?this.loadJson(e,h):i.includes(r)&&this.loadConfig(e,h)}))}))}loadHandler(e){this.loaded+=1,this.loaded===this.toLoad&&(this.loaded=0,this.toLoad=0,e(this),this.isLoaded=!0)}loadImage(e,t){const s=new Image;s.src=e,s.addEventListener("load",(()=>{this.loadHandler(t)}),!1);const i=e.split("/").pop().split(".")[0];i&&(this.list[i]=s)}async loadConfig(e,t){fetch(e).then((e=>e.text())).then((t=>{const s=t.split("\n").reduce(((e,t)=>{const[s,i]=t.trim().split("=");return s&&i?(e[s.trim()]=i.trim(),e):e}),{}),i=e.split("/").pop().split(".")[0];i&&(this.list[i]=s)}))}async loadJson(e,t){try{const s=await fetch(e),i=await s.json();this.loadHandler(t);const h=e.split("/").pop().split(".")[0];this.list[h]=i}catch(e){}}}const t=["KeyW","KeyA","KeyS","KeyD","Space","Escape","KeyI","KeyJ","KeyK","KeyL"];class s{constructor(e){this.keys={},console.log("Controller created"),this.game=e,this.player=e.level.player,window.addEventListener("keydown",(e=>this.handleKeyDown(e))),window.addEventListener("keyup",(e=>this.handleKeyUp(e)))}handleKeyDown(e){t.includes(e.code)&&(e.preventDefault(),this.keys[e.code]=1)}handleKeyUp(e){this.keys[e.code]=0}keyIsDown(e){return 1===this.keys[e]||!1}clearKeys(){this.keys={}}}const i={game:null,moveDisabled:!1,debug:!1};class h{constructor(e,t){this.x=e,this.y=t}add(e){return this.x+=e.x,this.y+=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}mul(e){return this.x*=e.x,this.y*=e.y,this}div(e){return this.x/=e.x,this.y/=e.y,this}clone(){return new h(this.x,this.y)}reset(){return this.x=0,this.y=0,this}}class r{constructor(){this.pos=new h(0,0),this.globalPos=new h(0,0),this.vel=new h(0,0),this.size=new h(8,8),this.rotation=0,this.speed=1,this.children=[],this.parent=null,this.id=Math.random().toString(16).substring(0,5)}addChild(e){this.children.includes(e)||(e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e))}removeChild(e){e.parent=null,this.children=this.children.filter((t=>t!==e))}debugDraw(e,t=!1){i.debug&&(e.ctx.strokeStyle="magenta",e.ctx.strokeRect(this.pos.x,this.pos.y,this.size.x,this.size.y),t&&(e.ctx.strokeStyle="green",e.ctx.font="8px monospace",e.ctx.strokeText(this.id,this.pos.x,this.pos.y-4)))}update(e){this.children.forEach((t=>{t.update(e)}))}render(e){this.children.forEach((t=>{t.render(e)})),this.debugDraw(e)}isOutOfParent(e){return e.clone().add(new h(this.size.x,0)).x>=this.parent.size.x+this.parent.pos.x||e.clone().add(new h(0,this.size.y)).y>=this.parent.size.y+this.parent.pos.y||e.x<=this.parent.pos.x||e.y<=this.parent.pos.y}}class n{constructor(){this.health=100,this.exp=0,this.level=1,this.damage=10,this.speed=1,this.defense=1}}const a={basic:{damage:10,speed:5,color:"red",size:[2,2],rechargeTime:50}};var o;!function(e){e.Basic="basic"}(o||(o={}));class l extends r{constructor(e,t,s){super(),this.pos=e,this.vel=t,this.type=s,this.size=new h(a[this.type].size[0],a[this.type].size[1]),this.id="player-bullet"}update(e){this.pos.add(this.vel.clone().mul(new h(a[this.type].speed,a[this.type].speed)))}render(e){e.ctx.save(),this.debugDraw(e),e.ctx.fillStyle=a[this.type].color,e.ctx.fillRect(this.pos.x,this.pos.y,2,2),e.ctx.restore()}}class d extends r{constructor(){super(),this.stats=new n,this.bullets=[],this.recharged=0,this.id="player",this.size=new h(16,16),this.pos=new h(127.5-this.size.x,120-this.size.y),this.stats.health=50,this.speed=2}fire(e,t){if(this.recharged>a.basic.rechargeTime){let t=new h(this.pos.x,this.pos.y+16),s=new h(this.pos.x+14,this.pos.y+16);0===e.y&&(t=new h(this.pos.x,this.pos.y),s=new h(this.pos.x,this.pos.y+14));const i=new l(t,e,o.Basic);this.bullets.push(i);const r=new l(s,e,o.Basic);this.bullets.push(r)}this.recharged=0}move(e){if(i.moveDisabled)return;const t=this.pos.clone(),s=this.pos.clone().add(e.mul(new h(this.speed,this.speed)));this.isOutOfParent(s)||(this.pos=s,s.x<=50&&(this.pos=t,this.parent.pos.x+=this.speed),s.y<=50&&(this.pos=t,this.parent.pos.y+=this.speed),s.clone().add(new h(this.size.x,0)).x>=i.game.renderer.windowSize.width-50&&(this.pos=t,this.parent.pos.x-=this.speed),s.clone().add(new h(0,this.size.y)).y>=i.game.renderer.windowSize.height-50&&(this.pos=t,this.parent.pos.y-=this.speed))}update(e){this.recharged+=e,this.bullets.forEach((t=>{t.update(e)}))}render(e){e.ctx.save(),e.drawSprite(0,24,16,16,this.pos.x,this.pos.y,16,16),this.bullets.forEach((t=>{t.render(e)})),this.bullets=this.bullets.filter((t=>{return s=t,i=e.canvas.width,h=e.canvas.height,!(s.pos.x<0||s.pos.x>i||s.pos.y<0||s.pos.y>h);var s,i,h})),this.debugDraw(e),e.ctx.restore()}}const c=[{id:"grass"},{id:"grass2"}];class p extends r{constructor(e){super(),this.player=null,this.map=[],this.size=e.size,this.pos=e.pos,this.map=Array(e.size.x*e.size.y).fill(0),this.map.forEach(((e,t)=>{this.map[t]=Math.trunc(Math.random()*c.length)}))}renderMap(e){for(let t=0;t<this.size.x/16;t++)for(let s=0;s<this.size.y/16;s++){const i=c[this.map[t+s*(this.size.x/16)]];e.drawTile(i.id,new h(this.pos.x+16*t,this.pos.y+16*s))}}render(e){this.renderMap(e),this.player?.render(e),this.children.forEach((t=>{t.render(e)})),this.debugDraw(e)}}const w={size:new h(512,512),pos:new h(-200,-200),map:[]};class y extends r{constructor(){super(),this.scene=new p(w),this.player=new d,this.scene.addChild(this.player)}update(e){this.scene?.update(e)}addScene(e){this.scene=e}render(e){this.scene?.render(e)}}class u{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info("â„¹ï¸ "+e)}debug(e){console.log("ðŸ“ "+e)}}class g{constructor(){this.logger=new u,this.image=new Image,this.windowSize={width:256,height:240},this.spriteSheetMap={},this.canvas=document.createElement("canvas"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.ctx.scale(this.canvas.width/this.windowSize.width,this.canvas.height/this.windowSize.height),document.querySelector("#main").append(this.canvas),this.logger.info("Renderer initialized"),window.addEventListener("resize",(()=>this.resize()))}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx.scale(this.canvas.width/this.windowSize.width,this.canvas.height/this.windowSize.height),this.ctx.imageSmoothingEnabled=!1}drawTile(e,t){const{x:s,y:i,w:h,h:r}=this.spriteSheetMap[e];this.drawSprite(s,i,h,r,t.x,t.y,h+1,r+1)}drawSprite(e,t,s,i,h,r,n,a){this.ctx.drawImage(this.image,e,t,s,i,h,r,n,a)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}const x="#000000",m="#ffffff",f="#49aa10",v="#b21030";class S extends g{progress(e,t,s,i=10,h=4){this.ctx.fillStyle=m,this.ctx.fillRect(t-2,s-2,i+4,h+4),this.ctx.fillStyle=m,this.ctx.fillRect(t+i+2,s+1,1,2),this.ctx.fillStyle=x,this.ctx.fillRect(t-1,s-1,i+2,h+2),this.ctx.fillStyle=v,this.ctx.fillRect(t,s,i,4),this.ctx.fillStyle=f,this.ctx.fillRect(t,s,e/i,4)}text(e,t,s){e.split("").forEach(((e,t)=>{this.ctx.drawImage(this.image,this.spriteSheetMap[e].x,this.spriteSheetMap[e].y,this.spriteSheetMap[e].w,this.spriteSheetMap[e].h,8*t,0,8,8)}))}}var z;!function(e){e[e.MENU=0]="MENU",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED",e[e.GAME_OVER=3]="GAME_OVER",e[e.OPTIONS=4]="OPTIONS",e[e.LOADING=5]="LOADING",e[e.FLYING=6]="FLYING",e[e.DISEMBARK=7]="DISEMBARK"}(z||(z={}));const D=new class{constructor(){this.renderer=new g,this.uiRenderer=new S,this.assetLoader=new e,this.level=new y,this.currentState=z.LOADING,this.lastTime=0,this.logger=new u,this.logger.info("Game started"),this.controller=new s(this),window.game=this}update(e){const t=e-this.lastTime;this.controller.keyIsDown("KeyW")&&this.level.player.move(new h(0,-1)),this.controller.keyIsDown("KeyA")&&this.level.player.move(new h(-1,0)),this.controller.keyIsDown("KeyS")&&this.level.player.move(new h(0,1)),this.controller.keyIsDown("KeyD")&&this.level.player.move(new h(1,0)),this.controller.keyIsDown("KeyI")&&this.level.player.fire(new h(0,-1),t),this.controller.keyIsDown("KeyJ")&&this.level.player.fire(new h(-1,0),t),this.controller.keyIsDown("KeyK")&&this.level.player.fire(new h(0,1),t),this.controller.keyIsDown("KeyL")&&this.level.player.fire(new h(1,0),t),this.lastTime=e,this.level.update(t)}changeState(e){this.currentState=e}render(){this.renderer.clear(),this.uiRenderer.clear(),this.uiRenderer.progress(this.level.player.stats.health,this.renderer.windowSize.width-28,8),this.level.render(this.renderer)}run(){this.logger.info("Game running"),this.assetLoader.load(["assets/spritesheet.png","assets/spritesheet_map.json"]).then((()=>{this.logger.info("Assets loaded"),this.renderer.image=this.assetLoader.list.spritesheet,this.renderer.spriteSheetMap=this.assetLoader.list.spritesheet_map,this.uiRenderer.image=this.assetLoader.list.spritesheet,this.uiRenderer.spriteSheetMap=this.assetLoader.list.spritesheet_map,i.game=this,this.loop()}))}loop(){this.update(performance.now()),this.render(),requestAnimationFrame((()=>this.loop()))}};D.run()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLMkwsWUFBWXZMLEtBQXNCLGdCQUN0RUosS0FBSzBMLFdBQVdsSyxNQUFReEIsS0FBSzJMLFlBQVl2TCxLQUFrQixZQUMzREosS0FBSzBMLFdBQVczQixlQUFpQi9KLEtBQUsyTCxZQUFZdkwsS0FBc0IsZ0JBQ3hFLE9BQWFKLEtBQ2JBLEtBQUtvTSxNQUFNLEdBRW5CLENBQ0FBLE9BQ0lwTSxLQUFLbUcsT0FBT2tHLFlBQVlDLE9BQ3hCdE0sS0FBS3FHLFNBQ0xrRyx1QkFBc0IsSUFBTXZNLEtBQUtvTSxRQUNyQyxHQ3ZGSnZKLEVBQUtzSixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL2Fzc2V0bG9hZGVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9jb250cm9sbGVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9zdGF0ZS50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvdmVjdG9yMi50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvZ2FtZW9iamVjdC50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvcGxheWVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvc2NlbmUudHMiLCJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL2xldmVsLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9sb2dnZXIudHMiLCJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL3JlbmRlcmVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy91aS1yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvZ2FtZS50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9AdHMtbm9jaGVja1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXNzZXRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRvTG9hZCA9IDA7XG4gICAgICAgIHRoaXMubG9hZGVkID0gMDtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxpc3QgPSB7fTtcbiAgICB9XG4gICAgbG9hZChhc3NldHMpIHtcbiAgICAgICAgY29uc3QgaW1hZ2VFeHQgPSBbXCJwbmdcIl07XG4gICAgICAgIGNvbnN0IGpzb25FeHQgPSBbXCJqc29uXCJdO1xuICAgICAgICBjb25zdCBjb25maWdFeHQgPSBbXCJ0b21sXCJdO1xuICAgICAgICB0aGlzLnRvTG9hZCA9IGFzc2V0cy5sZW5ndGg7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgYXNzZXRzLmZvckVhY2goKGFzc2V0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gYXNzZXQuc3BsaXQoXCIuXCIpLnBvcCgpIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlRXh0LmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UoYXNzZXQsIHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChqc29uRXh0LmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSnNvbihhc3NldCwgcmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZ0V4dC5pbmNsdWRlcyhleHRlbnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZENvbmZpZyhhc3NldCwgcmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsb2FkSGFuZGxlcihyZXNvbHZlKSB7XG4gICAgICAgIHRoaXMubG9hZGVkICs9IDE7XG4gICAgICAgIGlmICh0aGlzLmxvYWRlZCA9PT0gdGhpcy50b0xvYWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGVkID0gMDtcbiAgICAgICAgICAgIHRoaXMudG9Mb2FkID0gMDtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2FkSW1hZ2Uoc3JjLCByZXNvbHZlKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlLnNyYyA9IHNyYztcbiAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkSGFuZGxlcihyZXNvbHZlKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICBjb25zdCBuYW1lID0gc3JjLnNwbGl0KFwiL1wiKS5wb3AoKS5zcGxpdChcIi5cIilbMF07XG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RbbmFtZV0gPSBpbWFnZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBsb2FkQ29uZmlnKHNyYywgcmVzb2x2ZSkge1xuICAgICAgICBmZXRjaChzcmMpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gZGF0YS50ZXh0KCkpXG4gICAgICAgICAgICAudGhlbigodGV4dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGV4dC5zcGxpdChcIlxcblwiKS5yZWR1Y2UoKG9iaiwgc3RyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gc3RyLnRyaW0oKS5zcGxpdChcIj1cIik7XG4gICAgICAgICAgICAgICAgaWYgKCFrZXkgfHwgIXZhbHVlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgICAgIG9ialtrZXkudHJpbSgpXSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNyYy5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCIuXCIpWzBdO1xuICAgICAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RbbmFtZV0gPSBjb25maWc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBsb2FkSnNvbihzcmMsIHJlc29sdmUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goc3JjKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICB0aGlzLmxvYWRIYW5kbGVyKHJlc29sdmUpO1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNyYy5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCIuXCIpWzBdO1xuICAgICAgICAgICAgdGhpcy5saXN0W25hbWVdID0gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHsgfVxuICAgIH1cbn1cbiIsImNvbnN0IGFwcHJvdmVkS2V5cyA9IFtcbiAgICBcIktleVdcIixcbiAgICBcIktleUFcIixcbiAgICBcIktleVNcIixcbiAgICBcIktleURcIixcbiAgICBcIlNwYWNlXCIsXG4gICAgXCJFc2NhcGVcIixcbiAgICBcIktleUlcIixcbiAgICBcIktleUpcIixcbiAgICBcIktleUtcIixcbiAgICBcIktleUxcIixcbl07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XG4gICAgICAgIHRoaXMua2V5cyA9IHt9O1xuICAgICAgICBjb25zb2xlLmxvZyhcIkNvbnRyb2xsZXIgY3JlYXRlZFwiKTtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBnYW1lLmxldmVsLnBsYXllcjtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB0aGlzLmhhbmRsZUtleURvd24oZSkpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChlKSA9PiB0aGlzLmhhbmRsZUtleVVwKGUpKTtcbiAgICB9XG4gICAgaGFuZGxlS2V5RG93bihlKSB7XG4gICAgICAgIGlmICghYXBwcm92ZWRLZXlzLmluY2x1ZGVzKGUuY29kZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMua2V5c1tlLmNvZGVdID0gMTtcbiAgICB9XG4gICAgaGFuZGxlS2V5VXAoZSkge1xuICAgICAgICB0aGlzLmtleXNbZS5jb2RlXSA9IDA7XG4gICAgfVxuICAgIGtleUlzRG93bihrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5c1trZXldID09PSAxIHx8IGZhbHNlO1xuICAgIH1cbiAgICBjbGVhcktleXMoKSB7XG4gICAgICAgIHRoaXMua2V5cyA9IHt9O1xuICAgIH1cbn1cbiIsImNvbnN0IHN0YXRlID0ge1xuICAgIGdhbWU6IG51bGwsXG4gICAgbW92ZURpc2FibGVkOiBmYWxzZSxcbiAgICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIixcbn07XG5leHBvcnQgZGVmYXVsdCBzdGF0ZTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlY3RvcjIge1xuICAgIGNvbnN0cnVjdG9yKHgsIHkpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG4gICAgYWRkKHYpIHtcbiAgICAgICAgdGhpcy54ICs9IHYueDtcbiAgICAgICAgdGhpcy55ICs9IHYueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHN1Yih2KSB7XG4gICAgICAgIHRoaXMueCAtPSB2Lng7XG4gICAgICAgIHRoaXMueSAtPSB2Lnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBtdWwodikge1xuICAgICAgICB0aGlzLnggKj0gdi54O1xuICAgICAgICB0aGlzLnkgKj0gdi55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGl2KHYpIHtcbiAgICAgICAgdGhpcy54IC89IHYueDtcbiAgICAgICAgdGhpcy55IC89IHYueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy54LCB0aGlzLnkpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy54ID0gMDtcbiAgICAgICAgdGhpcy55ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHN0YXRlIGZyb20gXCIuL3N0YXRlXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wb3MgPSBuZXcgVmVjdG9yMigwLCAwKTtcbiAgICAgICAgdGhpcy5nbG9iYWxQb3MgPSBuZXcgVmVjdG9yMigwLCAwKTtcbiAgICAgICAgdGhpcy52ZWwgPSBuZXcgVmVjdG9yMigwLCAwKTtcbiAgICAgICAgdGhpcy5zaXplID0gbmV3IFZlY3RvcjIoOCwgOCk7XG4gICAgICAgIHRoaXMucm90YXRpb24gPSAwO1xuICAgICAgICB0aGlzLnNwZWVkID0gMTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgfVxuICAgIGFkZENoaWxkKGNoaWxkKSB7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmluY2x1ZGVzKGNoaWxkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGlsZC5wYXJlbnQpIHtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQucGFyZW50ID0gdGhpcztcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICB9XG4gICAgcmVtb3ZlQ2hpbGQoY2hpbGQpIHtcbiAgICAgICAgY2hpbGQucGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4uZmlsdGVyKChjKSA9PiBjICE9PSBjaGlsZCk7XG4gICAgfVxuICAgIGRlYnVnRHJhdyhyZW5kZXJlciwgaW5mbyA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5kZWJ1Zykge1xuICAgICAgICAgICAgcmVuZGVyZXIuY3R4LnN0cm9rZVN0eWxlID0gXCJtYWdlbnRhXCI7XG4gICAgICAgICAgICByZW5kZXJlci5jdHguc3Ryb2tlUmVjdCh0aGlzLnBvcy54LCB0aGlzLnBvcy55LCB0aGlzLnNpemUueCwgdGhpcy5zaXplLnkpO1xuICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5jdHguc3Ryb2tlU3R5bGUgPSBcImdyZWVuXCI7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuY3R4LmZvbnQgPSBcIjhweCBtb25vc3BhY2VcIjtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5jdHguc3Ryb2tlVGV4dCh0aGlzLmlkLCB0aGlzLnBvcy54LCB0aGlzLnBvcy55IC0gNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgIGNoaWxkLnVwZGF0ZShkdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW5kZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgY2hpbGQucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGVidWdEcmF3KHJlbmRlcmVyKTtcbiAgICB9XG4gICAgaXNPdXRPZlBhcmVudChwb3MpIHtcbiAgICAgICAgcmV0dXJuIChwb3MuY2xvbmUoKS5hZGQobmV3IFZlY3RvcjIodGhpcy5zaXplLngsIDApKS54ID49XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zaXplLnggKyB0aGlzLnBhcmVudC5wb3MueCB8fFxuICAgICAgICAgICAgcG9zLmNsb25lKCkuYWRkKG5ldyBWZWN0b3IyKDAsIHRoaXMuc2l6ZS55KSkueSA+PVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNpemUueSArIHRoaXMucGFyZW50LnBvcy55IHx8XG4gICAgICAgICAgICBwb3MueCA8PSB0aGlzLnBhcmVudC5wb3MueCB8fFxuICAgICAgICAgICAgcG9zLnkgPD0gdGhpcy5wYXJlbnQucG9zLnkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTdGF0cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGVhbHRoID0gMTAwO1xuICAgICAgICB0aGlzLmV4cCA9IDA7XG4gICAgICAgIHRoaXMubGV2ZWwgPSAxO1xuICAgICAgICB0aGlzLmRhbWFnZSA9IDEwO1xuICAgICAgICB0aGlzLnNwZWVkID0gMTtcbiAgICAgICAgdGhpcy5kZWZlbnNlID0gMTtcbiAgICB9XG59XG4iLCJpbXBvcnQgR2FtZU9iamVjdCwgeyBTdGF0cyB9IGZyb20gXCIuL2dhbWVvYmplY3RcIjtcbmltcG9ydCBzdGF0ZSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IHsgaXNPdXRPZlNjcmVlbiB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5jb25zdCB3ZWFwb25UeXBlcyA9IHtcbiAgICBiYXNpYzoge1xuICAgICAgICBkYW1hZ2U6IDEwLFxuICAgICAgICBzcGVlZDogNSxcbiAgICAgICAgY29sb3I6IFwicmVkXCIsXG4gICAgICAgIHNpemU6IFsyLCAyXSxcbiAgICAgICAgcmVjaGFyZ2VUaW1lOiA1MCxcbiAgICB9LFxufTtcbnZhciBXZWFwb25UeXBlO1xuKGZ1bmN0aW9uIChXZWFwb25UeXBlKSB7XG4gICAgV2VhcG9uVHlwZVtcIkJhc2ljXCJdID0gXCJiYXNpY1wiO1xufSkoV2VhcG9uVHlwZSB8fCAoV2VhcG9uVHlwZSA9IHt9KSk7XG5leHBvcnQgY2xhc3MgQnVsbGV0IGV4dGVuZHMgR2FtZU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocG9zLCB2ZWwsIHR5cGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMudmVsID0gdmVsO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnNpemUgPSBuZXcgVmVjdG9yMih3ZWFwb25UeXBlc1t0aGlzLnR5cGVdLnNpemVbMF0sIHdlYXBvblR5cGVzW3RoaXMudHlwZV0uc2l6ZVsxXSk7XG4gICAgICAgIHRoaXMuaWQgPSBcInBsYXllci1idWxsZXRcIjtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMucG9zLmFkZCh0aGlzLnZlbFxuICAgICAgICAgICAgLmNsb25lKClcbiAgICAgICAgICAgIC5tdWwobmV3IFZlY3RvcjIod2VhcG9uVHlwZXNbdGhpcy50eXBlXS5zcGVlZCwgd2VhcG9uVHlwZXNbdGhpcy50eXBlXS5zcGVlZCkpKTtcbiAgICB9XG4gICAgcmVuZGVyKHJlbmRlcmVyKSB7XG4gICAgICAgIHJlbmRlcmVyLmN0eC5zYXZlKCk7XG4gICAgICAgIHRoaXMuZGVidWdEcmF3KHJlbmRlcmVyKTtcbiAgICAgICAgcmVuZGVyZXIuY3R4LmZpbGxTdHlsZSA9IHdlYXBvblR5cGVzW3RoaXMudHlwZV0uY29sb3I7XG4gICAgICAgIHJlbmRlcmVyLmN0eC5maWxsUmVjdCh0aGlzLnBvcy54LCB0aGlzLnBvcy55LCAyLCAyKTtcbiAgICAgICAgcmVuZGVyZXIuY3R4LnJlc3RvcmUoKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBHYW1lT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0cyA9IG5ldyBTdGF0cygpO1xuICAgICAgICB0aGlzLmJ1bGxldHMgPSBbXTtcbiAgICAgICAgdGhpcy5yZWNoYXJnZWQgPSAwO1xuICAgICAgICB0aGlzLmlkID0gXCJwbGF5ZXJcIjtcbiAgICAgICAgdGhpcy5zaXplID0gbmV3IFZlY3RvcjIoMTYsIDE2KTtcbiAgICAgICAgdGhpcy5wb3MgPSBuZXcgVmVjdG9yMigyNTUgLyAyIC0gdGhpcy5zaXplLngsIDI0MCAvIDIgLSB0aGlzLnNpemUueSk7XG4gICAgICAgIHRoaXMuc3RhdHMuaGVhbHRoID0gNTA7XG4gICAgICAgIHRoaXMuc3BlZWQgPSAyO1xuICAgIH1cbiAgICBmaXJlKGRpcmVjdGlvbiwgZHQpIHtcbiAgICAgICAgaWYgKHRoaXMucmVjaGFyZ2VkID4gd2VhcG9uVHlwZXMuYmFzaWMucmVjaGFyZ2VUaW1lKSB7XG4gICAgICAgICAgICBsZXQgbGVmdEd1blBvcyA9IG5ldyBWZWN0b3IyKHRoaXMucG9zLngsIHRoaXMucG9zLnkgKyAxNik7XG4gICAgICAgICAgICBsZXQgcmlnaHRHdW5Qb3MgPSBuZXcgVmVjdG9yMih0aGlzLnBvcy54ICsgMTQsIHRoaXMucG9zLnkgKyAxNik7XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uLnkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBsZWZ0R3VuUG9zID0gbmV3IFZlY3RvcjIodGhpcy5wb3MueCwgdGhpcy5wb3MueSk7XG4gICAgICAgICAgICAgICAgcmlnaHRHdW5Qb3MgPSBuZXcgVmVjdG9yMih0aGlzLnBvcy54LCB0aGlzLnBvcy55ICsgMTQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVmdEJ1bGxldCA9IG5ldyBCdWxsZXQobGVmdEd1blBvcywgZGlyZWN0aW9uLCBXZWFwb25UeXBlLkJhc2ljKTtcbiAgICAgICAgICAgIHRoaXMuYnVsbGV0cy5wdXNoKGxlZnRCdWxsZXQpO1xuICAgICAgICAgICAgY29uc3QgYnVsbGV0ID0gbmV3IEJ1bGxldChyaWdodEd1blBvcywgZGlyZWN0aW9uLCBXZWFwb25UeXBlLkJhc2ljKTtcbiAgICAgICAgICAgIHRoaXMuYnVsbGV0cy5wdXNoKGJ1bGxldCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWNoYXJnZWQgPSAwO1xuICAgIH1cbiAgICBtb3ZlKGRpcmVjdGlvbikge1xuICAgICAgICBpZiAoc3RhdGUubW92ZURpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkUG9zID0gdGhpcy5wb3MuY2xvbmUoKTtcbiAgICAgICAgY29uc3QgbmV3UG9zID0gdGhpcy5wb3NcbiAgICAgICAgICAgIC5jbG9uZSgpXG4gICAgICAgICAgICAuYWRkKGRpcmVjdGlvbi5tdWwobmV3IFZlY3RvcjIodGhpcy5zcGVlZCwgdGhpcy5zcGVlZCkpKTtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSA1MDtcbiAgICAgICAgaWYgKHRoaXMuaXNPdXRPZlBhcmVudChuZXdQb3MpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IG5ld1BvcztcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLnggPD0gZGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gb2xkUG9zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucG9zLnggKz0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLnkgPD0gZGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gb2xkUG9zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucG9zLnkgKz0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLmNsb25lKCkuYWRkKG5ldyBWZWN0b3IyKHRoaXMuc2l6ZS54LCAwKSkueCA+PVxuICAgICAgICAgICAgc3RhdGUuZ2FtZS5yZW5kZXJlci53aW5kb3dTaXplLndpZHRoIC0gNTApIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gb2xkUG9zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucG9zLnggLT0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLmNsb25lKCkuYWRkKG5ldyBWZWN0b3IyKDAsIHRoaXMuc2l6ZS55KSkueSA+PVxuICAgICAgICAgICAgc3RhdGUuZ2FtZS5yZW5kZXJlci53aW5kb3dTaXplLmhlaWdodCAtIDUwKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IG9sZFBvcztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnBvcy55IC09IHRoaXMuc3BlZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMucmVjaGFyZ2VkICs9IGR0O1xuICAgICAgICB0aGlzLmJ1bGxldHMuZm9yRWFjaCgoYnVsbGV0KSA9PiB7XG4gICAgICAgICAgICBidWxsZXQudXBkYXRlKGR0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlcihyZW5kZXJlcikge1xuICAgICAgICByZW5kZXJlci5jdHguc2F2ZSgpO1xuICAgICAgICByZW5kZXJlci5kcmF3U3ByaXRlKDAsIDI0LCAxNiwgMTYsIHRoaXMucG9zLngsIHRoaXMucG9zLnksIDE2LCAxNik7XG4gICAgICAgIHRoaXMuYnVsbGV0cy5mb3JFYWNoKChidWxsZXQpID0+IHtcbiAgICAgICAgICAgIGJ1bGxldC5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5idWxsZXRzID0gdGhpcy5idWxsZXRzLmZpbHRlcigoYnVsbGV0KSA9PiAhaXNPdXRPZlNjcmVlbihidWxsZXQsIHJlbmRlcmVyLmNhbnZhcy53aWR0aCwgcmVuZGVyZXIuY2FudmFzLmhlaWdodCkpO1xuICAgICAgICB0aGlzLmRlYnVnRHJhdyhyZW5kZXJlcik7XG4gICAgICAgIHJlbmRlcmVyLmN0eC5yZXN0b3JlKCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGlzQ29sbGlkZShhLCBiKSB7XG4gICAgcmV0dXJuIChhLnBvcy54IDwgYi5wb3MueCArIGIuc2l6ZS54ICYmXG4gICAgICAgIGEucG9zLnggKyBhLnNpemUueCA+IGIucG9zLnggJiZcbiAgICAgICAgYS5wb3MueSA8IGIucG9zLnkgKyBiLnNpemUueSAmJlxuICAgICAgICBhLnBvcy55ICsgYS5zaXplLnkgPiBiLnBvcy55KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc091dE9mU2NyZWVuKG9iaiwgd2lkdGgsIGhlaWdodCkge1xuICAgIHJldHVybiAob2JqLnBvcy54IDwgMCB8fFxuICAgICAgICBvYmoucG9zLnggPiB3aWR0aCB8fFxuICAgICAgICBvYmoucG9zLnkgPCAwIHx8XG4gICAgICAgIG9iai5wb3MueSA+IGhlaWdodCk7XG59XG4iLCJpbXBvcnQgR2FtZU9iamVjdCBmcm9tIFwiLi9nYW1lb2JqZWN0XCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5jb25zdCB0aWxlcyA9IFtcbiAgICB7XG4gICAgICAgIGlkOiBcImdyYXNzXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGlkOiBcImdyYXNzMlwiLFxuICAgIH1cbl07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY2VuZSBleHRlbmRzIEdhbWVPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKGxldmVsRGF0YSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBsYXllciA9IG51bGw7XG4gICAgICAgIHRoaXMubWFwID0gW107XG4gICAgICAgIHRoaXMuc2l6ZSA9IGxldmVsRGF0YS5zaXplO1xuICAgICAgICB0aGlzLnBvcyA9IGxldmVsRGF0YS5wb3M7XG4gICAgICAgIC8vdGhpcy5tYXAgPSBsZXZlbERhdGEubWFwO1xuICAgICAgICB0aGlzLm1hcCA9IEFycmF5KGxldmVsRGF0YS5zaXplLnggKiBsZXZlbERhdGEuc2l6ZS55KS5maWxsKDApO1xuICAgICAgICB0aGlzLm1hcC5mb3JFYWNoKChfLCBpKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1hcFtpXSA9IE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSAqIHRpbGVzLmxlbmd0aCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW5kZXJNYXAocmVuZGVyZXIpIHtcbiAgICAgICAgY29uc3QgdGlsZVNpemUgPSAxNjtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnNpemUueCAvIHRpbGVTaXplOyB4KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5zaXplLnkgLyB0aWxlU2l6ZTsgeSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGlsZSA9IHRpbGVzW3RoaXMubWFwW3ggKyB5ICogKHRoaXMuc2l6ZS54IC8gdGlsZVNpemUpXV07XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuZHJhd1RpbGUodGlsZS5pZCwgbmV3IFZlY3RvcjIodGhpcy5wb3MueCArIHggKiB0aWxlU2l6ZSwgdGhpcy5wb3MueSArIHkgKiB0aWxlU2l6ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcihyZW5kZXJlcikge1xuICAgICAgICB0aGlzLnJlbmRlck1hcChyZW5kZXJlcik7XG4gICAgICAgIHRoaXMucGxheWVyPy5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICBjaGlsZC5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWJ1Z0RyYXcocmVuZGVyZXIpO1xuICAgIH1cbn1cbiIsImltcG9ydCBHYW1lT2JqZWN0IGZyb20gXCIuL2dhbWVvYmplY3RcIjtcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4vc2NlbmVcIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuL3ZlY3RvcjJcIjtcbmNvbnN0IGxldmVsRGF0YSA9IHtcbiAgICBzaXplOiBuZXcgVmVjdG9yMigxNiAqIDMyLCAxNiAqIDMyKSxcbiAgICBwb3M6IG5ldyBWZWN0b3IyKC0yMDAsIC0yMDApLFxuICAgIG1hcDogW10sXG59O1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGV2ZWwgZXh0ZW5kcyBHYW1lT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zY2VuZSA9IG5ldyBTY2VuZShsZXZlbERhdGEpO1xuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5zY2VuZS5hZGRDaGlsZCh0aGlzLnBsYXllcik7XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICB0aGlzLnNjZW5lPy51cGRhdGUoZHQpO1xuICAgIH1cbiAgICBhZGRTY2VuZShzY2VuZSkge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgfVxuICAgIHJlbmRlcihyZW5kZXJlcikge1xuICAgICAgICB0aGlzLnNjZW5lPy5yZW5kZXIocmVuZGVyZXIpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2dlciB7XG4gICAgZXJyb3IobWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICB3YXJuKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBpbmZvKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwi4oS577iPIFwiICsgbWVzc2FnZSk7XG4gICAgfVxuICAgIGRlYnVnKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCLwn5OdIFwiICsgbWVzc2FnZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IExvZ2dlciBmcm9tIFwiLi9sb2dnZXJcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgdGhpcy53aW5kb3dTaXplID0ge1xuICAgICAgICAgICAgd2lkdGg6IDI1NixcbiAgICAgICAgICAgIGhlaWdodDogMjQwLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNwcml0ZVNoZWV0TWFwID0ge307XG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgdGhpcy5jdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgICAgIC8vdGhpcy5jdHgudHJhbnNsYXRlKDAuNSwgMC41KTtcbiAgICAgICAgdGhpcy5jdHguc2NhbGUodGhpcy5jYW52YXMud2lkdGggLyB0aGlzLndpbmRvd1NpemUud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCAvIHRoaXMud2luZG93U2l6ZS5oZWlnaHQpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21haW5cIikuYXBwZW5kKHRoaXMuY2FudmFzKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIlJlbmRlcmVyIGluaXRpYWxpemVkXCIpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB0aGlzLnJlc2l6ZSgpKTtcbiAgICB9XG4gICAgcmVzaXplKCkge1xuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHRoaXMuY3R4LnNjYWxlKHRoaXMuY2FudmFzLndpZHRoIC8gdGhpcy53aW5kb3dTaXplLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQgLyB0aGlzLndpbmRvd1NpemUuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5jdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGRyYXdUaWxlKGlkLCBwb3MpIHtcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3LCBoIH0gPSB0aGlzLnNwcml0ZVNoZWV0TWFwW2lkXTtcbiAgICAgICAgdGhpcy5kcmF3U3ByaXRlKHgsIHksIHcsIGgsIHBvcy54LCBwb3MueSwgdyArIDEsIGggKyAxKTtcbiAgICB9XG4gICAgZHJhd1Nwcml0ZSh0aWxlWCwgdGlsZVksIHcsIGgsIHgsIHksIHNpemVYLCBzaXplWSkge1xuICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgdGlsZVgsIHRpbGVZLCB3LCBoLCB4LCB5LCBzaXplWCwgc2l6ZVkpO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZW5kZXJlciBmcm9tIFwiLi9yZW5kZXJlclwiO1xuY29uc3QgcGFsZXR0ZSA9IHtcbiAgICAweDAwOiBcIiMwMDAwMDBcIixcbiAgICAweDAxOiBcIiNmZmZmZmZcIixcbiAgICAweDAyOiBcIiM0OWFhMTBcIixcbiAgICAweDA0OiBcIiNiMjEwMzBcIixcbn07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSVJlbmRlcmVyIGV4dGVuZHMgUmVuZGVyZXIge1xuICAgIHByb2dyZXNzKHBlcmNlbnQsIHgsIHksIHdpZHRoID0gMTAsIGhlaWdodCA9IDQpIHtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gcGFsZXR0ZVsweDAxXTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCAtIDIsIHkgLSAyLCB3aWR0aCArIDQsIGhlaWdodCArIDQpO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBwYWxldHRlWzB4MDFdO1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4ICsgd2lkdGggKyAyLCB5ICsgMSwgMSwgMik7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHBhbGV0dGVbMHgwMF07XG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KHggLSAxLCB5IC0gMSwgd2lkdGggKyAyLCBoZWlnaHQgKyAyKTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gcGFsZXR0ZVsweDA0XTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIDQpO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBwYWxldHRlWzB4MDJdO1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4LCB5LCBwZXJjZW50IC8gd2lkdGgsIDQpO1xuICAgIH1cbiAgICB0ZXh0KHRleHQsIHgsIHkpIHtcbiAgICAgICAgdGV4dC5zcGxpdChcIlwiKS5mb3JFYWNoKChjaGFyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIHRoaXMuc3ByaXRlU2hlZXRNYXBbY2hhcl0ueCwgdGhpcy5zcHJpdGVTaGVldE1hcFtjaGFyXS55LCB0aGlzLnNwcml0ZVNoZWV0TWFwW2NoYXJdLncsIHRoaXMuc3ByaXRlU2hlZXRNYXBbY2hhcl0uaCwgaW5kZXggKiA4LCAwLCA4LCA4KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IEFzc2V0TG9hZGVyIGZyb20gXCIuL2Fzc2V0bG9hZGVyXCI7XG5pbXBvcnQgQ29udHJvbGxlciBmcm9tIFwiLi9jb250cm9sbGVyXCI7XG5pbXBvcnQgTGV2ZWwgZnJvbSBcIi4vbGV2ZWxcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4vbG9nZ2VyXCI7XG5pbXBvcnQgUmVuZGVyZXIgZnJvbSBcIi4vcmVuZGVyZXJcIjtcbmltcG9ydCBzdGF0ZSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IFVJUmVuZGVyZXIgZnJvbSBcIi4vdWktcmVuZGVyZXJcIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuL3ZlY3RvcjJcIjtcbnZhciBHYW1lU3RhdGU7XG4oZnVuY3Rpb24gKEdhbWVTdGF0ZSkge1xuICAgIEdhbWVTdGF0ZVtHYW1lU3RhdGVbXCJNRU5VXCJdID0gMF0gPSBcIk1FTlVcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiUExBWUlOR1wiXSA9IDFdID0gXCJQTEFZSU5HXCI7XG4gICAgR2FtZVN0YXRlW0dhbWVTdGF0ZVtcIlBBVVNFRFwiXSA9IDJdID0gXCJQQVVTRURcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiR0FNRV9PVkVSXCJdID0gM10gPSBcIkdBTUVfT1ZFUlwiO1xuICAgIEdhbWVTdGF0ZVtHYW1lU3RhdGVbXCJPUFRJT05TXCJdID0gNF0gPSBcIk9QVElPTlNcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiTE9BRElOR1wiXSA9IDVdID0gXCJMT0FESU5HXCI7XG4gICAgR2FtZVN0YXRlW0dhbWVTdGF0ZVtcIkZMWUlOR1wiXSA9IDZdID0gXCJGTFlJTkdcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiRElTRU1CQVJLXCJdID0gN10gPSBcIkRJU0VNQkFSS1wiO1xufSkoR2FtZVN0YXRlIHx8IChHYW1lU3RhdGUgPSB7fSkpO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyID0gbmV3IFVJUmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy5hc3NldExvYWRlciA9IG5ldyBBc3NldExvYWRlcigpO1xuICAgICAgICB0aGlzLmxldmVsID0gbmV3IExldmVsKCk7XG4gICAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gR2FtZVN0YXRlLkxPQURJTkc7XG4gICAgICAgIHRoaXMubGFzdFRpbWUgPSAwO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIkdhbWUgc3RhcnRlZFwiKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXIodGhpcyk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgd2luZG93W1wiZ2FtZVwiXSA9IHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0cykge1xuICAgICAgICBjb25zdCBkdCA9IHRzIC0gdGhpcy5sYXN0VGltZTtcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlXXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5tb3ZlKG5ldyBWZWN0b3IyKDAsIC0xKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlBXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5tb3ZlKG5ldyBWZWN0b3IyKC0xLCAwKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlTXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5tb3ZlKG5ldyBWZWN0b3IyKDAsIDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyLmtleUlzRG93bihcIktleURcIikpIHtcbiAgICAgICAgICAgIHRoaXMubGV2ZWwucGxheWVyLm1vdmUobmV3IFZlY3RvcjIoMSwgMCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIua2V5SXNEb3duKFwiS2V5SVwiKSkge1xuICAgICAgICAgICAgdGhpcy5sZXZlbC5wbGF5ZXIuZmlyZShuZXcgVmVjdG9yMigwLCAtMSksIGR0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyLmtleUlzRG93bihcIktleUpcIikpIHtcbiAgICAgICAgICAgIHRoaXMubGV2ZWwucGxheWVyLmZpcmUobmV3IFZlY3RvcjIoLTEsIDApLCBkdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlLXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5maXJlKG5ldyBWZWN0b3IyKDAsIDEpLCBkdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlMXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5maXJlKG5ldyBWZWN0b3IyKDEsIDApLCBkdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0VGltZSA9IHRzO1xuICAgICAgICB0aGlzLmxldmVsLnVwZGF0ZShkdCk7XG4gICAgfVxuICAgIGNoYW5nZVN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5jbGVhcigpO1xuICAgICAgICB0aGlzLnVpUmVuZGVyZXIuY2xlYXIoKTtcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyLnByb2dyZXNzKHRoaXMubGV2ZWwucGxheWVyLnN0YXRzLmhlYWx0aCwgdGhpcy5yZW5kZXJlci53aW5kb3dTaXplLndpZHRoIC0gMjgsIDgpO1xuICAgICAgICB0aGlzLmxldmVsLnJlbmRlcih0aGlzLnJlbmRlcmVyKTtcbiAgICB9XG4gICAgcnVuKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiR2FtZSBydW5uaW5nXCIpO1xuICAgICAgICB0aGlzLmFzc2V0TG9hZGVyXG4gICAgICAgICAgICAubG9hZChbXCJhc3NldHMvc3ByaXRlc2hlZXQucG5nXCIsIFwiYXNzZXRzL3Nwcml0ZXNoZWV0X21hcC5qc29uXCJdKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIkFzc2V0cyBsb2FkZWRcIik7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmltYWdlID0gdGhpcy5hc3NldExvYWRlci5saXN0W1wic3ByaXRlc2hlZXRcIl07XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNwcml0ZVNoZWV0TWFwID0gdGhpcy5hc3NldExvYWRlci5saXN0W1wic3ByaXRlc2hlZXRfbWFwXCJdO1xuICAgICAgICAgICAgdGhpcy51aVJlbmRlcmVyLmltYWdlID0gdGhpcy5hc3NldExvYWRlci5saXN0W1wic3ByaXRlc2hlZXRcIl07XG4gICAgICAgICAgICB0aGlzLnVpUmVuZGVyZXIuc3ByaXRlU2hlZXRNYXAgPSB0aGlzLmFzc2V0TG9hZGVyLmxpc3RbXCJzcHJpdGVzaGVldF9tYXBcIl07XG4gICAgICAgICAgICBzdGF0ZS5nYW1lID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMubG9vcCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbG9vcCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGUocGVyZm9ybWFuY2Uubm93KCkpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpO1xuICAgIH1cbn1cbiIsImltcG9ydCBHYW1lIGZyb20gXCIuL2dhbWVcIjtcbmNvbnN0IGdhbWUgPSBuZXcgR2FtZSgpO1xuZ2FtZS5ydW4oKTtcbiJdLCJuYW1lcyI6WyJBc3NldExvYWRlciIsImNvbnN0cnVjdG9yIiwidGhpcyIsInRvTG9hZCIsImxvYWRlZCIsImlzTG9hZGVkIiwibGlzdCIsImxvYWQiLCJhc3NldHMiLCJpbWFnZUV4dCIsImpzb25FeHQiLCJjb25maWdFeHQiLCJsZW5ndGgiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZvckVhY2giLCJhc3NldCIsImV4dGVuc2lvbiIsInNwbGl0IiwicG9wIiwiaW5jbHVkZXMiLCJsb2FkSW1hZ2UiLCJsb2FkSnNvbiIsImxvYWRDb25maWciLCJsb2FkSGFuZGxlciIsInNyYyIsImltYWdlIiwiSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwibmFtZSIsImFzeW5jIiwiZmV0Y2giLCJ0aGVuIiwiZGF0YSIsInRleHQiLCJjb25maWciLCJyZWR1Y2UiLCJvYmoiLCJzdHIiLCJrZXkiLCJ2YWx1ZSIsInRyaW0iLCJyZXNwb25zZSIsImpzb24iLCJlcnJvciIsImFwcHJvdmVkS2V5cyIsIkNvbnRyb2xsZXIiLCJnYW1lIiwia2V5cyIsImNvbnNvbGUiLCJsb2ciLCJwbGF5ZXIiLCJsZXZlbCIsIndpbmRvdyIsImUiLCJoYW5kbGVLZXlEb3duIiwiaGFuZGxlS2V5VXAiLCJjb2RlIiwicHJldmVudERlZmF1bHQiLCJrZXlJc0Rvd24iLCJjbGVhcktleXMiLCJtb3ZlRGlzYWJsZWQiLCJkZWJ1ZyIsIlZlY3RvcjIiLCJ4IiwieSIsImFkZCIsInYiLCJzdWIiLCJtdWwiLCJkaXYiLCJjbG9uZSIsInJlc2V0IiwiR2FtZU9iamVjdCIsInBvcyIsImdsb2JhbFBvcyIsInZlbCIsInNpemUiLCJyb3RhdGlvbiIsInNwZWVkIiwiY2hpbGRyZW4iLCJwYXJlbnQiLCJpZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImFkZENoaWxkIiwiY2hpbGQiLCJyZW1vdmVDaGlsZCIsInB1c2giLCJmaWx0ZXIiLCJjIiwiZGVidWdEcmF3IiwicmVuZGVyZXIiLCJpbmZvIiwiY3R4Iiwic3Ryb2tlU3R5bGUiLCJzdHJva2VSZWN0IiwiZm9udCIsInN0cm9rZVRleHQiLCJ1cGRhdGUiLCJkdCIsInJlbmRlciIsImlzT3V0T2ZQYXJlbnQiLCJTdGF0cyIsImhlYWx0aCIsImV4cCIsImRhbWFnZSIsImRlZmVuc2UiLCJ3ZWFwb25UeXBlcyIsImJhc2ljIiwiY29sb3IiLCJyZWNoYXJnZVRpbWUiLCJXZWFwb25UeXBlIiwiQnVsbGV0IiwidHlwZSIsInN1cGVyIiwic2F2ZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwicmVzdG9yZSIsIlBsYXllciIsInN0YXRzIiwiYnVsbGV0cyIsInJlY2hhcmdlZCIsImZpcmUiLCJkaXJlY3Rpb24iLCJsZWZ0R3VuUG9zIiwicmlnaHRHdW5Qb3MiLCJsZWZ0QnVsbGV0IiwiQmFzaWMiLCJidWxsZXQiLCJtb3ZlIiwib2xkUG9zIiwibmV3UG9zIiwiZHJhd1Nwcml0ZSIsIndpZHRoIiwiY2FudmFzIiwiaGVpZ2h0IiwidGlsZXMiLCJTY2VuZSIsImxldmVsRGF0YSIsIm1hcCIsIkFycmF5IiwiZmlsbCIsIl8iLCJpIiwidHJ1bmMiLCJyZW5kZXJNYXAiLCJ0aWxlIiwiZHJhd1RpbGUiLCJMZXZlbCIsInNjZW5lIiwiYWRkU2NlbmUiLCJMb2dnZXIiLCJtZXNzYWdlIiwid2FybiIsIlJlbmRlcmVyIiwibG9nZ2VyIiwid2luZG93U2l6ZSIsInNwcml0ZVNoZWV0TWFwIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiZ2V0Q29udGV4dCIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsInNjYWxlIiwicXVlcnlTZWxlY3RvciIsImFwcGVuZCIsInJlc2l6ZSIsInciLCJoIiwidGlsZVgiLCJ0aWxlWSIsInNpemVYIiwic2l6ZVkiLCJkcmF3SW1hZ2UiLCJjbGVhciIsImNsZWFyUmVjdCIsInBhbGV0dGUiLCJVSVJlbmRlcmVyIiwicHJvZ3Jlc3MiLCJwZXJjZW50IiwiY2hhciIsImluZGV4IiwiR2FtZVN0YXRlIiwidWlSZW5kZXJlciIsImFzc2V0TG9hZGVyIiwiY3VycmVudFN0YXRlIiwiTE9BRElORyIsImxhc3RUaW1lIiwiY29udHJvbGxlciIsInRzIiwiY2hhbmdlU3RhdGUiLCJzdGF0ZSIsInJ1biIsImxvb3AiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJzb3VyY2VSb290IjoiIn0=