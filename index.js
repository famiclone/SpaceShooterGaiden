(()=>{"use strict";class t{constructor(){this.toLoad=0,this.loaded=0,this.isLoaded=!1,this.list={}}load(t){const e=["png"],s=["json"],i=["toml"];return this.toLoad=t.length,new Promise((h=>{t.forEach((t=>{const r=t.split(".").pop()||"";e.includes(r)?this.loadImage(t,h):s.includes(r)?this.loadJson(t,h):i.includes(r)&&this.loadConfig(t,h)}))}))}loadHandler(t){this.loaded+=1,this.loaded===this.toLoad&&(this.loaded=0,this.toLoad=0,t(this),this.isLoaded=!0)}loadImage(t,e){const s=new Image;s.src=t,s.addEventListener("load",(()=>{this.loadHandler(e)}),!1);const i=t.split("/").pop().split(".")[0];i&&(this.list[i]=s)}async loadConfig(t,e){fetch(t).then((t=>t.text())).then((e=>{const s=e.split("\n").reduce(((t,e)=>{const[s,i]=e.trim().split("=");return s&&i?(t[s.trim()]=i.trim(),t):t}),{}),i=t.split("/").pop().split(".")[0];i&&(this.list[i]=s)}))}async loadJson(t,e){try{const s=await fetch(t),i=await s.json();this.loadHandler(e);const h=t.split("/").pop().split(".")[0];this.list[h]=i}catch(t){}}}const e=["KeyW","KeyA","KeyS","KeyD","Space","Escape","KeyI","KeyJ","KeyK","KeyL","Enter"];class s{constructor(){this.keys={},console.log("Controller created"),window.addEventListener("keydown",(t=>this.handleKeyDown(t))),window.addEventListener("keyup",(t=>this.handleKeyUp(t)))}handleKeyDown(t){e.includes(t.code)&&(t.preventDefault(),this.keys[t.code]=1)}handleKeyUp(t){this.keys[t.code]=0}keyIsDown(t){return this.keys[t]}clearKeys(){this.keys={}}}class i{error(t){console.error(t)}warn(t){console.warn(t)}info(t){console.info("ℹ️ "+t)}debug(t){console.log("📝 "+t)}}const h={game:null,moveDisabled:!1,debug:!1,windowResolution:{width:255,height:240}};class r{constructor(){this.logger=new i,this.image=new Image,this.windowSize={width:h.windowResolution.width,height:h.windowResolution.height},this.spriteSheetMap={},this.canvas=document.createElement("canvas"),this.canvas.width=510,this.canvas.height=480,this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.ctx.scale(this.canvas.width/this.windowSize.width,this.canvas.height/this.windowSize.height),document.querySelector("#main").append(this.canvas),this.logger.info("Renderer initialized"),window.addEventListener("resize",(()=>this.resize()))}resize(){this.canvas.width=510,this.canvas.height=480,this.ctx.scale(this.canvas.width/this.windowSize.width,this.canvas.height/this.windowSize.height),this.ctx.imageSmoothingEnabled=!1}drawTile(t,e){const{x:s,y:i,w:h,h:r}=this.spriteSheetMap[t];this.drawSprite(s,i,h,r,e.x,e.y,h+1,r+1)}drawSprite(t,e,s,i,h,r,a,n){this.ctx.drawImage(this.image,t,e,s,i,h,r,a,n)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}class a{constructor(t,e){this.x=t,this.y=e}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}mul(t){return this.x*=t.x,this.y*=t.y,this}div(t){return this.x/=t.x,this.y/=t.y,this}clone(){return new a(this.x,this.y)}reset(){return this.x=0,this.y=0,this}}class n{constructor(t,e){this.pos=new a(0,0),this.globalPos=new a(0,0),this.vel=new a(0,0),this.size=new a(8,8),this.rotation=0,this.spriteDirection=new a(0,0),this.speed=1,this.children=[],this.parent=null,this.id=Math.random().toString(16).substring(0,5),this.pos=t.clone().add(this.parent?.pos||new a(0,0)),this.id=e}addChild(t){this.children.includes(t)||(t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t))}removeChild(t){t.parent=null,this.children=this.children.filter((e=>e!==t))}debugDraw(t,e=!1){h.debug&&(t.ctx.strokeStyle="magenta",t.ctx.strokeRect(this.pos.x,this.pos.y,this.size.x,this.size.y),e&&(t.ctx.strokeStyle="green",t.ctx.font="8px monospace",t.ctx.strokeText(this.id,this.pos.x,this.pos.y-4)))}update(t){this.children.forEach((e=>{e.update(t)}))}render(t){this.children.forEach((e=>{e.render(t)})),this.debugDraw(t)}isOutOfParent(t){return t.clone().add(new a(this.size.x,0)).x>=this.parent.size.x+this.parent.pos.x||t.clone().add(new a(0,this.size.y)).y>=this.parent.size.y+this.parent.pos.y||t.x<=this.parent.pos.x||t.y<=this.parent.pos.y}}function o(...t){return l.play(...t)}const l={volume:.3,sampleRate:44100,x:new(window.AudioContext||webkitAudioContext),play:function(...t){return this.playSamples(this.buildSamples(...t))},playSamples:function(...t){const e=this.x.createBuffer(t.length,t[0].length,this.sampleRate),s=this.x.createBufferSource();return t.map(((t,s)=>e.getChannelData(s).set(t))),s.buffer=e,s.connect(this.x.destination),s.start(),s},buildSamples:function(t=1,e=.05,s=220,i=0,h=0,r=.1,a=0,n=1,o=0,l=0,c=0,d=0,p=0,w=0,u=0,m=0,y=0,g=1,x=0,f=0){const S=2*Math.PI;let v,D,R=this.sampleRate,M=o*=500*S/R/R,z=s*=(1+2*e*Math.random()-e)*S/R,E=[],b=0,k=0,I=0,L=1,T=0,K=0,P=0;for(l*=500*S/R**3,u*=S/R,c*=S/R,d*=R,p=p*R|0,D=(i=i*R+9)+(x*=R)+(h*=R)+(r*=R)+(y*=R)|0;I<D;E[I++]=P)++K%(100*m|0)||(P=a?a>1?a>2?a>3?Math.sin((b%S)**3):Math.max(Math.min(Math.tan(b),1),-1):1-(2*b/S%2+2)%2:1-4*Math.abs(Math.round(b/S)-b/S):Math.sin(b),P=(p?1-f+f*Math.sin(S*I/p):1)*(P>0?1:-1)*Math.abs(P)**n*t*this.volume*(I<i?I/i:I<i+x?1-(I-i)/x*(1-g):I<i+x+h?g:I<D-y?(D-I-y)/r*g:0),P=y?P/2+(y>I?0:(I<D-y?1:(D-I)/y)*E[I-y|0]/2):P),v=(s+=o+=l)*Math.cos(u*k++),b+=v-v*w*(1-1e9*(Math.sin(I)+1)%2),L&&++L>d&&(s+=c,z+=c,L=0),!p||++T%p||(s=z,o=M,L=L||1);return E},getNote:function(t=0,e=440){return e*2**(t/12)}},c={basic:{damage:10,speed:.5,color:"red",size:[2,2],rechargeTime:500}};var d;!function(t){t.Basic="basic"}(d||(d={}));class p{constructor(){this.health=100,this.exp=0,this.level=1,this.damage=10,this.speed=1,this.defense=1,this.recharged=0}}class w extends n{constructor(t,e,s){super(t,"bullet"),this.pos=t,this.vel=e,this.type=s,this.size=new a(c[this.type].size[0],c[this.type].size[1])}update(t){this.pos.add(this.vel.clone().mul(new a(c[this.type].speed*t,c[this.type].speed*t)))}render(t){t.ctx.save(),this.debugDraw(t),t.ctx.fillStyle=c[this.type].color,t.ctx.fillRect(this.pos.x,this.pos.y,2,2),t.ctx.restore()}}class u extends n{constructor(t,e){super(t,e),this.stats=new p,this.bullets=[],this.prevPos=new a(0,0),this.wasShot=!1,this.id=e}move(t){this.prevPos=this.pos.clone(),this.pos.add(t)}fire(t,e){if(this.stats.recharged>c.basic.rechargeTime){let e=new a(this.pos.x,this.pos.y+16),s=new a(this.pos.x+14,this.pos.y+16);this.wasShot=!0,this.spriteDirection=t.clone(),0===t.y&&(e=new a(this.pos.x,this.pos.y),s=new a(this.pos.x,this.pos.y+14));const i=new w(e,t,d.Basic);this.bullets.push(i);const h=new w(s,t,d.Basic);this.bullets.push(h),o(...[,,537,.02,.02,.22,1,1.59,-6.98,4.97]),this.stats.recharged=0}this.wasShot=!1}update(t){this.stats.recharged+=t,this.bullets.forEach((e=>{e.update(t)}))}}class m extends u{constructor(t){super(t,"player"),this.stats=new p,this.bullets=[],this.recharged=0,this.isDisembarked=!1,this.size=new a(16,16),this.pos=t,this.prevPos=t,this.stats.health=50,this.speed=2}move(t){this.prevPos=this.pos.clone(),this.spriteDirection=t.clone();const e=this.pos.clone().add(t.mul(new a(this.speed,this.speed)));this.isOutOfParent(e)||(this.pos=e,e.x<=50&&(this.pos=this.prevPos,this.parent.pos.x+=this.speed),e.y<=50&&(this.pos=this.prevPos,this.parent.pos.y+=this.speed),e.clone().add(new a(this.size.x,0)).x>=h.game.renderer.windowSize.width-50&&(this.pos=this.prevPos,this.parent.pos.x-=this.speed),e.clone().add(new a(0,this.size.y)).y>=h.game.renderer.windowSize.height-50&&(this.pos=this.prevPos,this.parent.pos.y-=this.speed))}render(t){let e="DOWN";this.spriteDirection.x>0?e="RIGHT":this.spriteDirection.x<0?e="LEFT":this.spriteDirection.y>0?e="DOWN":this.spriteDirection.y<0&&(e="UP"),this.wasShot&&(this.spriteDirection.x>0&&(e="RIGHT"),this.spriteDirection.x<0&&(e="LEFT"),this.spriteDirection.y>0&&(e="DOWN"),this.spriteDirection.y<0&&(e="UP")),t.ctx.save(),t.drawSprite(t.spriteSheetMap[`PLAYER_${e}`].x,t.spriteSheetMap[`PLAYER_${e}`].y,t.spriteSheetMap[`PLAYER_${e}`].w,t.spriteSheetMap[`PLAYER_${e}`].h,this.pos.x,this.pos.y,16,16),this.bullets.forEach((e=>{e.render(t)})),this.bullets=this.bullets.filter((e=>{return s=e,i=t.canvas.width,h=t.canvas.height,!(s.pos.x<0||s.pos.x>i||s.pos.y<0||s.pos.y>h);var s,i,h})),this.debugDraw(t),t.ctx.restore()}}const y=[{id:"grass",collision:!1},{id:"grass2",coliision:!1},{id:"grass3",collision:!0}];class g extends n{constructor(t,e){super(t.pos,"scene"),this.player=e,this.map=[],this.size=t.size,this.pos=t.pos,this.map=t.map(),this.addChild(e),this.map.forEach(((t,e)=>{this.map[e]=Math.trunc(Math.random()*y.length)}))}getTile(t){return y[this.map[Math.trunc(t.x/16)+Math.trunc(t.y/16)*(this.size.x/16)]]}update(t){this.pos.x+this.size.x<0||this.pos.y+this.size.y<0||this.pos.x>h.windowResolution.width||this.pos.y>h.windowResolution.height||this.children.forEach((e=>{e.update(t)}))}renderMap(t){const e=16;for(let s=0;s<this.size.x/e;s++)for(let i=0;i<this.size.y/e;i++){const r=y[this.map[s+i*(this.size.x/e)]];if(s*e+this.pos.x>h.windowResolution.width||i*e+this.pos.y>h.windowResolution.height||s*e+this.pos.x+e<0||i*e+this.pos.y+e<0)continue;const n=new a(this.pos.x+s*e,this.pos.y+i*e);t.drawTile(r.id,n)}}render(t){this.renderMap(t),this.player?.render(t),this.children.forEach((e=>{e.render(t)})),this.debugDraw(t)}}const x={size:new a(320,320),pos:new a(-0,-0),map:function(){return Array(this.size.x*this.size.y).fill(0)}};class f extends n{constructor(){super(new a(0,0),"level"),this.player=new m(new a(h.windowResolution.width/2-16,h.windowResolution.height/2-16)),this.scene=new g(x,this.player);for(let t=0;t<10;t++){const e=new u(new a(this.pos.x+100*Math.random(),this.pos.y+100*Math.random()),`enemy_${t}`);e.id="enemy",this.scene.addChild(e)}}update(t){this.scene?.update(t)}addScene(t){this.scene=t}render(t){this.scene?.render(t)}}const S="#000000",v="#ffffff",D="#49aa10",R="#b21030";class M extends r{progress(t,e,s,i=10,h=4){this.ctx.fillStyle=v,this.ctx.fillRect(e-2,s-2,i+4,h+4),this.ctx.fillStyle=v,this.ctx.fillRect(e+i+2,s+1,1,2),this.ctx.fillStyle=S,this.ctx.fillRect(e-1,s-1,i+2,h+2),this.ctx.fillStyle=R,this.ctx.fillRect(e,s,i,4),this.ctx.fillStyle=D,this.ctx.fillRect(e,s,t/i,4)}text(t,e,s,i=!1){i?Math.floor(Date.now()/300)%2==0&&t.split("").forEach(((t,i)=>{this.ctx.drawImage(this.image,this.spriteSheetMap[t].x,this.spriteSheetMap[t].y,this.spriteSheetMap[t].w,this.spriteSheetMap[t].h,8*i+e,s,8,8)})):t.split("").forEach(((t,i)=>{this.ctx.drawImage(this.image,this.spriteSheetMap[t].x,this.spriteSheetMap[t].y,this.spriteSheetMap[t].w,this.spriteSheetMap[t].h,8*i+e,s,8,8)}))}}class z{constructor(t){this.game=t}update(t){}render(t){}renderUI(t){}}class E extends z{constructor(t){super(t)}update(t){this.game.controller.keyIsDown("Enter")&&(this.game.stateStack.pop(),this.game.stateStack.push(new b(this.game,{r:0,g:0,b:0},1e3)))}render(){this.game.uiRenderer.text("SPACE SHOOTER GAIDEN",45,30),this.game.uiRenderer.text("PRESS ENTER",80,120,!0),this.game.uiRenderer.text("WASD - MOVE, IJKL - FIRE",30,220)}}class b extends z{constructor(t,e,s){super(t),this.color=e,this.time=s,this.lastTime=0,this.aplha=0}update(t){this.lastTime+=t,this.lastTime>this.time&&o(...[1.66,,322,.05,.24,.19,,.5,,-22,935,.41,.35,.1,,,.22,.77]),this.lastTime>this.time/3?this.aplha=1:this.aplha=this.lastTime/(this.time/3),this.lastTime>this.time/3*2&&(this.aplha=1-(this.lastTime-this.time/3*2)/(this.time/3)),this.lastTime>this.time&&(this.game.stateStack.pop(),this.game.stateStack.push(new I(this.game)))}render(){this.game.renderer.ctx.fillStyle=`rgb(${this.color.r}, ${this.color.g}, ${this.color.b}, ${this.aplha})`,this.game.renderer.ctx.fillRect(0,0,this.game.renderer.windowSize.width,this.game.renderer.windowSize.height)}}class k extends z{constructor(t){super(t)}update(t){this.game.controller.keyIsDown("Escape")&&this.game.stateStack.pop()}render(){this.game.uiRenderer.text("MENU",80,30)}}class I extends z{constructor(t){super(t),this.level=new f,this.renderer=new r,this.uiRenderer=new M}update(t){this.game.controller.keyIsDown("KeyA")&&this.level.player.move(new a(-1,0)),this.game.controller.keyIsDown("KeyD")&&this.level.player.move(new a(1,0)),this.game.controller.keyIsDown("KeyW")&&this.level.player.move(new a(0,-1)),this.game.controller.keyIsDown("KeyS")&&this.level.player.move(new a(0,1)),this.game.controller.keyIsDown("KeyI")&&this.level.player.fire(new a(0,-1),t),this.game.controller.keyIsDown("KeyJ")&&this.level.player.fire(new a(-1,0),t),this.game.controller.keyIsDown("KeyK")&&this.level.player.fire(new a(0,1),t),this.game.controller.keyIsDown("KeyL")&&this.level.player.fire(new a(1,0),t),this.game.controller.keyIsDown("Escape")&&this.game.stateStack.push(new k(this.game)),this.level.update(t)}render(t){this.game.uiRenderer.progress(this.level.player.stats.health,this.game.renderer.windowSize.width-28,8),this.level.render(this.game.renderer)}}class L{constructor(){this.states=[]}clear(){this.states=[]}update(t){0!==this.states.length&&this.states[this.states.length-1].update(t)}render(t){this.states.forEach((e=>{e.render(t)}))}push(t){this.states.push(t)}pop(){this.states.pop()}}(new class{constructor(){this.lastTime=0,this.setTitle("SpaceShooterGaiden"),this.logger=new i,this.controller=new s,this.stateStack=new L,this.renderer=new r,this.uiRenderer=new M,this.assetLoader=new t,window.game=this}update(t){const e=t-this.lastTime;this.lastTime=t,this.stateStack.update(e)}setTitle(t){document.title=t}render(){this.renderer.clear(),this.uiRenderer.clear(),this.stateStack.render(this.renderer)}run(){this.logger.info("Game running"),this.assetLoader.load(["assets/spritesheet.png","assets/spritesheet_map.json"]).then((()=>{this.logger.info("Assets loaded"),this.renderer.image=this.assetLoader.list.spritesheet,this.renderer.spriteSheetMap=this.assetLoader.list.spritesheet_map,this.uiRenderer.image=this.assetLoader.list.spritesheet,this.uiRenderer.spriteSheetMap=this.assetLoader.list.spritesheet_map,this.stateStack.push(new E(this)),h.game=this,this.loop()}))}loop(){this.update(performance.now()),this.render(),requestAnimationFrame((()=>this.loop()))}}).run()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW5KLFNBQ0lsSSxLQUFLMkgsU0FBUzlCLFFBQ2Q3RixLQUFLb1EsV0FBV3ZLLFFBQ2hCN0YsS0FBS3VRLFdBQVdySSxPQUFPbEksS0FBSzJILFNBQ2hDLENBQ0EySixNQUNJdFIsS0FBS21FLE9BQU9SLEtBQUssZ0JBQ2pCM0QsS0FBS21SLFlBQ0E5USxLQUFLLENBQUMseUJBQTBCLGdDQUNoQ3lCLE1BQUssS0FDTjlCLEtBQUttRSxPQUFPUixLQUFLLGlCQUNqQjNELEtBQUsySCxTQUFTbkcsTUFBUXhCLEtBQUttUixZQUFZL1EsS0FBa0IsWUFDekRKLEtBQUsySCxTQUFTdEQsZUFBaUJyRSxLQUFLbVIsWUFBWS9RLEtBQXNCLGdCQUN0RUosS0FBS29RLFdBQVc1TyxNQUFReEIsS0FBS21SLFlBQVkvUSxLQUFrQixZQUMzREosS0FBS29RLFdBQVcvTCxlQUFpQnJFLEtBQUttUixZQUFZL1EsS0FBc0IsZ0JBQ3hFSixLQUFLdVEsV0FBV2hKLEtBQUssSUFBSThJLEVBQVdyUSxPQUNwQyxPQUFhQSxLQUNiQSxLQUFLdVIsTUFBTSxHQUVuQixDQUNBQSxPQUNJdlIsS0FBS2dJLE9BQU93SixZQUFZekIsT0FDeEIvUCxLQUFLa0ksU0FDTHVKLHVCQUFzQixJQUFNelIsS0FBS3VSLFFBQ3JDLElEbERDRCxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL2Fzc2V0bG9hZGVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9jb250cm9sbGVyLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9sb2dnZXIudHMiLCJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL3N0YXRlLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvdmVjdG9yMi50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvZ2FtZW9iamVjdC50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9ub2RlX21vZHVsZXMvenpmeC9aekZYLmpzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9wZXJzb24udHMiLCJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL3BsYXllci50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL3NjZW5lLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9sZXZlbC50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvdWktcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vc3BhY2VzaG9vdGVyZ2FpZGVuLy4vc3JjL3N0YXRlLXN0YWNrLnRzIiwid2VicGFjazovL3NwYWNlc2hvb3RlcmdhaWRlbi8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9zcGFjZXNob290ZXJnYWlkZW4vLi9zcmMvZ2FtZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL0B0cy1ub2NoZWNrXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBc3NldExvYWRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudG9Mb2FkID0gMDtcbiAgICAgICAgdGhpcy5sb2FkZWQgPSAwO1xuICAgICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGlzdCA9IHt9O1xuICAgIH1cbiAgICBsb2FkKGFzc2V0cykge1xuICAgICAgICBjb25zdCBpbWFnZUV4dCA9IFtcInBuZ1wiXTtcbiAgICAgICAgY29uc3QganNvbkV4dCA9IFtcImpzb25cIl07XG4gICAgICAgIGNvbnN0IGNvbmZpZ0V4dCA9IFtcInRvbWxcIl07XG4gICAgICAgIHRoaXMudG9Mb2FkID0gYXNzZXRzLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBhc3NldHMuZm9yRWFjaCgoYXNzZXQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBhc3NldC5zcGxpdChcIi5cIikucG9wKCkgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VFeHQuaW5jbHVkZXMoZXh0ZW5zaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRJbWFnZShhc3NldCwgcmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGpzb25FeHQuaW5jbHVkZXMoZXh0ZW5zaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRKc29uKGFzc2V0LCByZXNvbHZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29uZmlnRXh0LmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkQ29uZmlnKGFzc2V0LCByZXNvbHZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxvYWRIYW5kbGVyKHJlc29sdmUpIHtcbiAgICAgICAgdGhpcy5sb2FkZWQgKz0gMTtcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkID09PSB0aGlzLnRvTG9hZCkge1xuICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSAwO1xuICAgICAgICAgICAgdGhpcy50b0xvYWQgPSAwO1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxvYWRJbWFnZShzcmMsIHJlc29sdmUpIHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2Uuc3JjID0gc3JjO1xuICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvYWRIYW5kbGVyKHJlc29sdmUpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBzcmMuc3BsaXQoXCIvXCIpLnBvcCgpLnNwbGl0KFwiLlwiKVswXTtcbiAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMubGlzdFtuYW1lXSA9IGltYWdlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGxvYWRDb25maWcoc3JjLCByZXNvbHZlKSB7XG4gICAgICAgIGZldGNoKHNyYylcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiBkYXRhLnRleHQoKSlcbiAgICAgICAgICAgIC50aGVuKCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpLnJlZHVjZSgob2JqLCBzdHIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBzdHIudHJpbSgpLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWtleSB8fCAhdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICAgICAgb2JqW2tleS50cmltKCldID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gc3JjLnNwbGl0KFwiL1wiKS5wb3AoKS5zcGxpdChcIi5cIilbMF07XG4gICAgICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdFtuYW1lXSA9IGNvbmZpZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGxvYWRKc29uKHNyYywgcmVzb2x2ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzcmMpO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIHRoaXMubG9hZEhhbmRsZXIocmVzb2x2ZSk7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gc3JjLnNwbGl0KFwiL1wiKS5wb3AoKS5zcGxpdChcIi5cIilbMF07XG4gICAgICAgICAgICB0aGlzLmxpc3RbbmFtZV0gPSBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikgeyB9XG4gICAgfVxufVxuIiwiY29uc3QgYXBwcm92ZWRLZXlzID0gW1xuICAgIFwiS2V5V1wiLFxuICAgIFwiS2V5QVwiLFxuICAgIFwiS2V5U1wiLFxuICAgIFwiS2V5RFwiLFxuICAgIFwiU3BhY2VcIixcbiAgICBcIkVzY2FwZVwiLFxuICAgIFwiS2V5SVwiLFxuICAgIFwiS2V5SlwiLFxuICAgIFwiS2V5S1wiLFxuICAgIFwiS2V5TFwiLFxuICAgIFwiRW50ZXJcIixcbl07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5rZXlzID0ge307XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29udHJvbGxlciBjcmVhdGVkXCIpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHRoaXMuaGFuZGxlS2V5RG93bihlKSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKGUpID0+IHRoaXMuaGFuZGxlS2V5VXAoZSkpO1xuICAgIH1cbiAgICBoYW5kbGVLZXlEb3duKGUpIHtcbiAgICAgICAgaWYgKCFhcHByb3ZlZEtleXMuaW5jbHVkZXMoZS5jb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5rZXlzW2UuY29kZV0gPSAxO1xuICAgIH1cbiAgICBoYW5kbGVLZXlVcChlKSB7XG4gICAgICAgIHRoaXMua2V5c1tlLmNvZGVdID0gMDtcbiAgICB9XG4gICAga2V5SXNEb3duKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzW2tleV07XG4gICAgfVxuICAgIGNsZWFyS2V5cygpIHtcbiAgICAgICAgdGhpcy5rZXlzID0ge307XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9nZ2VyIHtcbiAgICBlcnJvcihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIHdhcm4obWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgfVxuICAgIGluZm8obWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLmluZm8oXCLihLnvuI8gXCIgKyBtZXNzYWdlKTtcbiAgICB9XG4gICAgZGVidWcobWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIvCfk50gXCIgKyBtZXNzYWdlKTtcbiAgICB9XG59XG4iLCJjb25zdCBTQ0FMRSA9IDI7XG5jb25zdCBzdGF0ZSA9IHtcbiAgICBnYW1lOiBudWxsLFxuICAgIG1vdmVEaXNhYmxlZDogZmFsc2UsXG4gICAgZGVidWc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIsXG4gICAgd2luZG93UmVzb2x1dGlvbjoge1xuICAgICAgICB3aWR0aDogMjU1LFxuICAgICAgICBoZWlnaHQ6IDI0MFxuICAgIH0sXG59O1xuZXhwb3J0IGRlZmF1bHQgc3RhdGU7XG4iLCJpbXBvcnQgTG9nZ2VyIGZyb20gXCIuL2xvZ2dlclwiO1xuaW1wb3J0IHN0YXRlIGZyb20gXCIuL3N0YXRlXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuICAgICAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBzdGF0ZS53aW5kb3dSZXNvbHV0aW9uLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBzdGF0ZS53aW5kb3dSZXNvbHV0aW9uLmhlaWdodCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zcHJpdGVTaGVldE1hcCA9IHt9O1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIC8vdGhpcy5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgLy90aGlzLmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gMjU1ICogMjtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gMjQwICogMjtcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIHRoaXMuY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN0eC5zY2FsZSh0aGlzLmNhbnZhcy53aWR0aCAvIHRoaXMud2luZG93U2l6ZS53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0IC8gdGhpcy53aW5kb3dTaXplLmhlaWdodCk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpblwiKS5hcHBlbmQodGhpcy5jYW52YXMpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiUmVuZGVyZXIgaW5pdGlhbGl6ZWRcIik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHRoaXMucmVzaXplKCkpO1xuICAgIH1cbiAgICByZXNpemUoKSB7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gMjU1ICogMjtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gMjQwICogMjtcbiAgICAgICAgdGhpcy5jdHguc2NhbGUodGhpcy5jYW52YXMud2lkdGggLyB0aGlzLndpbmRvd1NpemUud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCAvIHRoaXMud2luZG93U2l6ZS5oZWlnaHQpO1xuICAgICAgICB0aGlzLmN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZHJhd1RpbGUoaWQsIHBvcykge1xuICAgICAgICBjb25zdCB7IHgsIHksIHcsIGggfSA9IHRoaXMuc3ByaXRlU2hlZXRNYXBbaWRdO1xuICAgICAgICB0aGlzLmRyYXdTcHJpdGUoeCwgeSwgdywgaCwgcG9zLngsIHBvcy55LCB3ICsgMSwgaCArIDEpO1xuICAgIH1cbiAgICBkcmF3U3ByaXRlKHRpbGVYLCB0aWxlWSwgdywgaCwgeCwgeSwgc2l6ZVgsIHNpemVZKSB7XG4gICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlLCB0aWxlWCwgdGlsZVksIHcsIGgsIHgsIHksIHNpemVYLCBzaXplWSk7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yMiB7XG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgIH1cbiAgICBhZGQodikge1xuICAgICAgICB0aGlzLnggKz0gdi54O1xuICAgICAgICB0aGlzLnkgKz0gdi55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc3ViKHYpIHtcbiAgICAgICAgdGhpcy54IC09IHYueDtcbiAgICAgICAgdGhpcy55IC09IHYueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG11bCh2KSB7XG4gICAgICAgIHRoaXMueCAqPSB2Lng7XG4gICAgICAgIHRoaXMueSAqPSB2Lnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBkaXYodikge1xuICAgICAgICB0aGlzLnggLz0gdi54O1xuICAgICAgICB0aGlzLnkgLz0gdi55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLngsIHRoaXMueSk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnggPSAwO1xuICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCJpbXBvcnQgc3RhdGUgZnJvbSBcIi4vc3RhdGVcIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuL3ZlY3RvcjJcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBvcywgaWQpIHtcbiAgICAgICAgdGhpcy5wb3MgPSBuZXcgVmVjdG9yMigwLCAwKTtcbiAgICAgICAgdGhpcy5nbG9iYWxQb3MgPSBuZXcgVmVjdG9yMigwLCAwKTtcbiAgICAgICAgdGhpcy52ZWwgPSBuZXcgVmVjdG9yMigwLCAwKTtcbiAgICAgICAgdGhpcy5zaXplID0gbmV3IFZlY3RvcjIoOCwgOCk7XG4gICAgICAgIHRoaXMucm90YXRpb24gPSAwO1xuICAgICAgICB0aGlzLnNwcml0ZURpcmVjdGlvbiA9IG5ldyBWZWN0b3IyKDAsIDApO1xuICAgICAgICB0aGlzLnNwZWVkID0gMTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgICAgIHRoaXMucG9zID0gcG9zLmNsb25lKCkuYWRkKHRoaXMucGFyZW50Py5wb3MgfHwgbmV3IFZlY3RvcjIoMCwgMCkpO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIGFkZENoaWxkKGNoaWxkKSB7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmluY2x1ZGVzKGNoaWxkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGlsZC5wYXJlbnQpIHtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQucGFyZW50ID0gdGhpcztcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICB9XG4gICAgcmVtb3ZlQ2hpbGQoY2hpbGQpIHtcbiAgICAgICAgY2hpbGQucGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4uZmlsdGVyKChjKSA9PiBjICE9PSBjaGlsZCk7XG4gICAgfVxuICAgIGRlYnVnRHJhdyhyZW5kZXJlciwgaW5mbyA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5kZWJ1Zykge1xuICAgICAgICAgICAgcmVuZGVyZXIuY3R4LnN0cm9rZVN0eWxlID0gXCJtYWdlbnRhXCI7XG4gICAgICAgICAgICByZW5kZXJlci5jdHguc3Ryb2tlUmVjdCh0aGlzLnBvcy54LCB0aGlzLnBvcy55LCB0aGlzLnNpemUueCwgdGhpcy5zaXplLnkpO1xuICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5jdHguc3Ryb2tlU3R5bGUgPSBcImdyZWVuXCI7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuY3R4LmZvbnQgPSBcIjhweCBtb25vc3BhY2VcIjtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5jdHguc3Ryb2tlVGV4dCh0aGlzLmlkLCB0aGlzLnBvcy54LCB0aGlzLnBvcy55IC0gNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgIGNoaWxkLnVwZGF0ZShkdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW5kZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgY2hpbGQucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGVidWdEcmF3KHJlbmRlcmVyKTtcbiAgICB9XG4gICAgaXNPdXRPZlBhcmVudChwb3MpIHtcbiAgICAgICAgcmV0dXJuIChwb3MuY2xvbmUoKS5hZGQobmV3IFZlY3RvcjIodGhpcy5zaXplLngsIDApKS54ID49XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zaXplLnggKyB0aGlzLnBhcmVudC5wb3MueCB8fFxuICAgICAgICAgICAgcG9zLmNsb25lKCkuYWRkKG5ldyBWZWN0b3IyKDAsIHRoaXMuc2l6ZS55KSkueSA+PVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNpemUueSArIHRoaXMucGFyZW50LnBvcy55IHx8XG4gICAgICAgICAgICBwb3MueCA8PSB0aGlzLnBhcmVudC5wb3MueCB8fFxuICAgICAgICAgICAgcG9zLnkgPD0gdGhpcy5wYXJlbnQucG9zLnkpO1xuICAgIH1cbn1cbiIsIi8qXHJcblxyXG5aekZYIC0gWnVwZXIgWm1hbGwgWm91bmQgWnludGggdjEuMS44XHJcbkJ5IEZyYW5rIEZvcmNlIDIwMTlcclxuaHR0cHM6Ly9naXRodWIuY29tL0tpbGxlZEJ5QVBpeGVsL1p6RlhcclxuXHJcblp6RlggRmVhdHVyZXNcclxuXHJcbi0gVGlueSBzeW50aCBlbmdpbmUgd2l0aCAyMCBjb250cm9sbGFibGUgcGFyYW1ldGVycy5cclxuLSBQbGF5IHNvdW5kcyB2aWEgY29kZSwgbm8gbmVlZCBmb3Igc291bmQgYXNzZWQgZmlsZXMhXHJcbi0gQ29tcGF0aWJsZSB3aXRoIG1vc3QgbW9kZXJuIHdlYiBicm93c2Vycy5cclxuLSBTbWFsbCBjb2RlIGZvb3RwcmludCwgdGhlIG1pY3JvIHZlcnNpb24gaXMgdW5kZXIgMSBraWxvYnl0ZS5cclxuLSBDYW4gcHJvZHVjZSBhIGh1Z2UgdmFyaWV0eSBvZiBzb3VuZCBlZmZlY3QgdHlwZXMuXHJcbi0gU291bmRzIGNhbiBiZSBwbGF5ZWQgd2l0aCBhIHNob3J0IGNhbGwuIHp6ZngoLi4uWywsLCwuMSwsLCw5XSlcclxuLSBBIHNtYWxsIGJpdCBvZiByYW5kb21uZXNzIGFwcGllZCB0byBzb3VuZHMgd2hlbiBwbGF5ZWQuXHJcbi0gVXNlIFpaRlguR2V0Tm90ZSB0byBnZXQgZnJlcXVlbmNpZXMgb24gYSBzdGFuZGFyZCBkaWF0b25pYyBzY2FsZS5cclxuLSBTb3VuZHMgY2FuIGJlIHNhdmVkIG91dCBhcyB3YXYgZmlsZXMgZm9yIG9mZmxpbmUgcGxheWJhY2suXHJcbi0gTm8gYWRkaXRpb25hbCBsaWJyYXJpZXMgb3IgZGVwZW5kZW5jaWVzIGFyZSByZXF1aXJlZC5cclxuXHJcbiovXHJcbi8qXHJcblxyXG4gIFp6RlggTUlUIExpY2Vuc2VcclxuICBcclxuICBDb3B5cmlnaHQgKGMpIDIwMTkgLSBGcmFuayBGb3JjZVxyXG4gIFxyXG4gIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbiAgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG4gIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuICBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuICBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG4gIFxyXG4gIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxyXG4gIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcbiAgXHJcbiAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG4gIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuICBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXHJcbiAgU09GVFdBUkUuXHJcbiAgXHJcbiovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG4vLyBwbGF5IGEgenpmeCBzb3VuZFxyXG5leHBvcnQgZnVuY3Rpb24genpmeCguLi5wYXJhbWV0ZXJzKSB7IHJldHVybiBaWkZYLnBsYXkoLi4ucGFyYW1ldGVycykgfVxyXG5cclxuLy8genpmeCBvYmplY3Qgd2l0aCBzb21lIGV4dHJhIGZ1bmN0aW9uYWx0eVxyXG5leHBvcnQgY29uc3QgWlpGWCA9XHJcbntcclxuICAgIC8vIG1hc3RlciB2b2x1bWUgc2NhbGVcclxuICAgIHZvbHVtZTogLjMsXHJcbiAgICBcclxuICAgIC8vIHNhbXBsZSByYXRlIGZvciBhdWRpb1xyXG4gICAgc2FtcGxlUmF0ZTogNDQxMDAsXHJcbiAgICBcclxuICAgIC8vIGNyZWF0ZSBzaGFyZWQgYXVkaW8gY29udGV4dFxyXG4gICAgeDogbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdlYmtpdEF1ZGlvQ29udGV4dCksXHJcblxyXG4gICAgLy8gcGxheSBhIHNvdW5kIGZyb20genpmeCBwYXJhbWVydGVyc1xyXG4gICAgcGxheTogZnVuY3Rpb24oLi4ucGFyYW1ldGVycylcclxuICAgIHtcclxuICAgICAgICAvLyBidWlsZCBzYW1wbGVzIGFuZCBzdGFydCBzb3VuZFxyXG4gICAgICAgIHJldHVybiB0aGlzLnBsYXlTYW1wbGVzKHRoaXMuYnVpbGRTYW1wbGVzKC4uLnBhcmFtZXRlcnMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gcGxheSBhbiBhcnJheSBvZiBzYW1wbGVzXHJcbiAgICBwbGF5U2FtcGxlczogZnVuY3Rpb24oLi4uc2FtcGxlcylcclxuICAgIHtcclxuICAgICAgICAvLyBjcmVhdGUgYnVmZmVyIGFuZCBzb3VyY2VcclxuICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLnguY3JlYXRlQnVmZmVyKHNhbXBsZXMubGVuZ3RoLCBzYW1wbGVzWzBdLmxlbmd0aCwgdGhpcy5zYW1wbGVSYXRlKTtcclxuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnguY3JlYXRlQnVmZmVyU291cmNlKCk7XHJcblxyXG4gICAgICAgIHNhbXBsZXMubWFwKChkLGkpPT4gYnVmZmVyLmdldENoYW5uZWxEYXRhKGkpLnNldChkKSk7XHJcbiAgICAgICAgc291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjtcclxuICAgICAgICBzb3VyY2UuY29ubmVjdCh0aGlzLnguZGVzdGluYXRpb24pO1xyXG4gICAgICAgIHNvdXJjZS5zdGFydCgpO1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGJ1aWxkIGFuIGFycmF5IG9mIHNhbXBsZXNcclxuICAgIGJ1aWxkU2FtcGxlczogZnVuY3Rpb25cclxuICAgIChcclxuICAgICAgICB2b2x1bWUgPSAxLCBcclxuICAgICAgICByYW5kb21uZXNzID0gLjA1LFxyXG4gICAgICAgIGZyZXF1ZW5jeSA9IDIyMCxcclxuICAgICAgICBhdHRhY2sgPSAwLFxyXG4gICAgICAgIHN1c3RhaW4gPSAwLFxyXG4gICAgICAgIHJlbGVhc2UgPSAuMSxcclxuICAgICAgICBzaGFwZSA9IDAsXHJcbiAgICAgICAgc2hhcGVDdXJ2ZSA9IDEsXHJcbiAgICAgICAgc2xpZGUgPSAwLCBcclxuICAgICAgICBkZWx0YVNsaWRlID0gMCwgXHJcbiAgICAgICAgcGl0Y2hKdW1wID0gMCwgXHJcbiAgICAgICAgcGl0Y2hKdW1wVGltZSA9IDAsIFxyXG4gICAgICAgIHJlcGVhdFRpbWUgPSAwLCBcclxuICAgICAgICBub2lzZSA9IDAsXHJcbiAgICAgICAgbW9kdWxhdGlvbiA9IDAsXHJcbiAgICAgICAgYml0Q3J1c2ggPSAwLFxyXG4gICAgICAgIGRlbGF5ID0gMCxcclxuICAgICAgICBzdXN0YWluVm9sdW1lID0gMSxcclxuICAgICAgICBkZWNheSA9IDAsXHJcbiAgICAgICAgdHJlbW9sbyA9IDBcclxuICAgIClcclxuICAgIHtcclxuICAgICAgICAvLyBpbml0IHBhcmFtZXRlcnNcclxuICAgICAgICBjb25zdCBQSTIgPSBNYXRoLlBJKjI7XHJcbiAgICAgICAgbGV0IHNhbXBsZVJhdGUgPSB0aGlzLnNhbXBsZVJhdGUsXHJcbiAgICAgICAgc2lnbiA9IHYgPT4gdj4wPzE6LTEsXHJcbiAgICAgICAgc3RhcnRTbGlkZSA9IHNsaWRlICo9IDUwMCAqIFBJMiAvIHNhbXBsZVJhdGUgLyBzYW1wbGVSYXRlLFxyXG4gICAgICAgIHN0YXJ0RnJlcXVlbmN5ID0gXHJcbiAgICAgICAgICAgIGZyZXF1ZW5jeSAqPSAoMSArIHJhbmRvbW5lc3MqMipNYXRoLnJhbmRvbSgpIC0gcmFuZG9tbmVzcykgKiBQSTIgLyBzYW1wbGVSYXRlLFxyXG4gICAgICAgIGI9W10sIHQ9MCwgdG09MCwgaT0wLCBqPTEsIHI9MCwgYz0wLCBzPTAsIGYsIGxlbmd0aDtcclxuXHJcbiAgICAgICAgLy8gc2NhbGUgYnkgc2FtcGxlIHJhdGVcclxuICAgICAgICBhdHRhY2sgPSBhdHRhY2sgKiBzYW1wbGVSYXRlICsgOTsgLy8gbWluaW11bSBhdHRhY2sgdG8gcHJldmVudCBwb3BcclxuICAgICAgICBkZWNheSAqPSBzYW1wbGVSYXRlO1xyXG4gICAgICAgIHN1c3RhaW4gKj0gc2FtcGxlUmF0ZTtcclxuICAgICAgICByZWxlYXNlICo9IHNhbXBsZVJhdGU7XHJcbiAgICAgICAgZGVsYXkgKj0gc2FtcGxlUmF0ZTtcclxuICAgICAgICBkZWx0YVNsaWRlICo9IDUwMCAqIFBJMiAvIHNhbXBsZVJhdGUqKjM7XHJcbiAgICAgICAgbW9kdWxhdGlvbiAqPSBQSTIgLyBzYW1wbGVSYXRlO1xyXG4gICAgICAgIHBpdGNoSnVtcCAqPSBQSTIgLyBzYW1wbGVSYXRlO1xyXG4gICAgICAgIHBpdGNoSnVtcFRpbWUgKj0gc2FtcGxlUmF0ZTtcclxuICAgICAgICByZXBlYXRUaW1lID0gcmVwZWF0VGltZSAqIHNhbXBsZVJhdGUgfCAwO1xyXG5cclxuICAgICAgICAvLyBnZW5lcmF0ZSB3YXZlZm9ybVxyXG4gICAgICAgIGZvcihsZW5ndGggPSBhdHRhY2sgKyBkZWNheSArIHN1c3RhaW4gKyByZWxlYXNlICsgZGVsYXkgfCAwO1xyXG4gICAgICAgICAgICBpIDwgbGVuZ3RoOyBiW2krK10gPSBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCEoKytjJShiaXRDcnVzaCoxMDB8MCkpKSAgICAgICAgICAgICAgICAgICAgICAvLyBiaXQgY3J1c2hcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgIHMgPSBzaGFwZT8gc2hhcGU+MT8gc2hhcGU+Mj8gc2hhcGU+Mz8gICAgICAgICAvLyB3YXZlIHNoYXBlXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5zaW4oKHQlUEkyKSoqMykgOiAgICAgICAgICAgICAgICAgICAgLy8gNCBub2lzZVxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KE1hdGgubWluKE1hdGgudGFuKHQpLDEpLC0xKTogICAgIC8vIDMgdGFuXHJcbiAgICAgICAgICAgICAgICAgICAgMS0oMip0L1BJMiUyKzIpJTI6ICAgICAgICAgICAgICAgICAgICAgICAgLy8gMiBzYXdcclxuICAgICAgICAgICAgICAgICAgICAxLTQqTWF0aC5hYnMoTWF0aC5yb3VuZCh0L1BJMiktdC9QSTIpOiAgICAvLyAxIHRyaWFuZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5zaW4odCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMCBzaW5cclxuXHJcbiAgICAgICAgICAgICAgICBzID0gKHJlcGVhdFRpbWUgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAxIC0gdHJlbW9sbyArIHRyZW1vbG8qTWF0aC5zaW4oUEkyKmkvcmVwZWF0VGltZSkgLy8gdHJlbW9sb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDEpICpcclxuICAgICAgICAgICAgICAgICAgICBzaWduKHMpKihNYXRoLmFicyhzKSoqc2hhcGVDdXJ2ZSkgKiAgICAgICAvLyBjdXJ2ZSAwPXNxdWFyZSwgMj1wb2ludHlcclxuICAgICAgICAgICAgICAgICAgICB2b2x1bWUgKiB0aGlzLnZvbHVtZSAqICggICAgICAgICAgICAgICAgICAvLyBlbnZlbG9wZVxyXG4gICAgICAgICAgICAgICAgICAgIGkgPCBhdHRhY2sgPyBpL2F0dGFjayA6ICAgICAgICAgICAgICAgICAgIC8vIGF0dGFja1xyXG4gICAgICAgICAgICAgICAgICAgIGkgPCBhdHRhY2sgKyBkZWNheSA/ICAgICAgICAgICAgICAgICAgICAgIC8vIGRlY2F5XHJcbiAgICAgICAgICAgICAgICAgICAgMS0oKGktYXR0YWNrKS9kZWNheSkqKDEtc3VzdGFpblZvbHVtZSkgOiAgLy8gZGVjYXkgZmFsbG9mZlxyXG4gICAgICAgICAgICAgICAgICAgIGkgPCBhdHRhY2sgICsgZGVjYXkgKyBzdXN0YWluID8gICAgICAgICAgIC8vIHN1c3RhaW5cclxuICAgICAgICAgICAgICAgICAgICBzdXN0YWluVm9sdW1lIDogICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdXN0YWluIHZvbHVtZVxyXG4gICAgICAgICAgICAgICAgICAgIGkgPCBsZW5ndGggLSBkZWxheSA/ICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbGVhc2VcclxuICAgICAgICAgICAgICAgICAgICAobGVuZ3RoIC0gaSAtIGRlbGF5KS9yZWxlYXNlICogICAgICAgICAgICAvLyByZWxlYXNlIGZhbGxvZmZcclxuICAgICAgICAgICAgICAgICAgICBzdXN0YWluVm9sdW1lIDogICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWxlYXNlIHZvbHVtZVxyXG4gICAgICAgICAgICAgICAgICAgIDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc3QgcmVsZWFzZVxyXG5cclxuICAgICAgICAgICAgICAgIHMgPSBkZWxheSA/IHMvMiArIChkZWxheSA+IGkgPyAwIDogICAgICAgICAgICAvLyBkZWxheVxyXG4gICAgICAgICAgICAgICAgICAgIChpPGxlbmd0aC1kZWxheT8gMSA6IChsZW5ndGgtaSkvZGVsYXkpICogIC8vIHJlbGVhc2UgZGVsYXkgXHJcbiAgICAgICAgICAgICAgICAgICAgYltpLWRlbGF5fDBdLzIpIDogczsgICAgICAgICAgICAgICAgICAgICAgLy8gc2FtcGxlIGRlbGF5XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGYgPSAoZnJlcXVlbmN5ICs9IHNsaWRlICs9IGRlbHRhU2xpZGUpICogICAgICAgICAgLy8gZnJlcXVlbmN5XHJcbiAgICAgICAgICAgICAgICBNYXRoLmNvcyhtb2R1bGF0aW9uKnRtKyspOyAgICAgICAgICAgICAgICAgICAgLy8gbW9kdWxhdGlvblxyXG4gICAgICAgICAgICB0ICs9IGYgLSBmKm5vaXNlKigxIC0gKE1hdGguc2luKGkpKzEpKjFlOSUyKTsgICAgIC8vIG5vaXNlXHJcblxyXG4gICAgICAgICAgICBpZiAoaiAmJiArK2ogPiBwaXRjaEp1bXBUaW1lKSAgICAgICAvLyBwaXRjaCBqdW1wXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZyZXF1ZW5jeSArPSBwaXRjaEp1bXA7ICAgICAgICAgLy8gYXBwbHkgcGl0Y2gganVtcFxyXG4gICAgICAgICAgICAgICAgc3RhcnRGcmVxdWVuY3kgKz0gcGl0Y2hKdW1wOyAgICAvLyBhbHNvIGFwcGx5IHRvIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICBqID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0b3AgcGl0Y2gganVtcCB0aW1lXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZXBlYXRUaW1lICYmICEoKytyICUgcmVwZWF0VGltZSkpIC8vIHJlcGVhdFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmcmVxdWVuY3kgPSBzdGFydEZyZXF1ZW5jeTsgICAgIC8vIHJlc2V0IGZyZXF1ZW5jeVxyXG4gICAgICAgICAgICAgICAgc2xpZGUgPSBzdGFydFNsaWRlOyAgICAgICAgICAgICAvLyByZXNldCBzbGlkZVxyXG4gICAgICAgICAgICAgICAgaiA9IGogfHwgMTsgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBwaXRjaCBqdW1wIHRpbWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGI7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyBnZXQgZnJlcXVlbmN5IG9mIGEgbXVzaWNhbCBub3RlIG9uIGEgZGlhdG9uaWMgc2NhbGVcclxuICAgIGdldE5vdGU6IGZ1bmN0aW9uKHNlbWl0b25lT2Zmc2V0PTAsIHJvb3ROb3RlRnJlcXVlbmN5PTQ0MClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gcm9vdE5vdGVGcmVxdWVuY3kgKiAyKiooc2VtaXRvbmVPZmZzZXQvMTIpO1xyXG4gICAgfVxyXG5cclxufSAvLyBaWkZYIiwiaW1wb3J0IEdhbWVPYmplY3QgZnJvbSBcIi4vZ2FtZW9iamVjdFwiO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4vdmVjdG9yMlwiO1xuaW1wb3J0IHsgenpmeCB9IGZyb20gXCJ6emZ4XCI7XG5leHBvcnQgY29uc3Qgd2VhcG9uVHlwZXMgPSB7XG4gICAgYmFzaWM6IHtcbiAgICAgICAgZGFtYWdlOiAxMCxcbiAgICAgICAgc3BlZWQ6IDAuNSxcbiAgICAgICAgY29sb3I6IFwicmVkXCIsXG4gICAgICAgIHNpemU6IFsyLCAyXSxcbiAgICAgICAgcmVjaGFyZ2VUaW1lOiA1MDAsXG4gICAgfSxcbn07XG5leHBvcnQgdmFyIFdlYXBvblR5cGU7XG4oZnVuY3Rpb24gKFdlYXBvblR5cGUpIHtcbiAgICBXZWFwb25UeXBlW1wiQmFzaWNcIl0gPSBcImJhc2ljXCI7XG59KShXZWFwb25UeXBlIHx8IChXZWFwb25UeXBlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBTdGF0cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGVhbHRoID0gMTAwO1xuICAgICAgICB0aGlzLmV4cCA9IDA7XG4gICAgICAgIHRoaXMubGV2ZWwgPSAxO1xuICAgICAgICB0aGlzLmRhbWFnZSA9IDEwO1xuICAgICAgICB0aGlzLnNwZWVkID0gMTtcbiAgICAgICAgdGhpcy5kZWZlbnNlID0gMTtcbiAgICAgICAgdGhpcy5yZWNoYXJnZWQgPSAwO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCdWxsZXQgZXh0ZW5kcyBHYW1lT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3Rvcihwb3MsIHZlbCwgdHlwZSkge1xuICAgICAgICBzdXBlcihwb3MsIFwiYnVsbGV0XCIpO1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy52ZWwgPSB2ZWw7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuc2l6ZSA9IG5ldyBWZWN0b3IyKHdlYXBvblR5cGVzW3RoaXMudHlwZV0uc2l6ZVswXSwgd2VhcG9uVHlwZXNbdGhpcy50eXBlXS5zaXplWzFdKTtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMucG9zLmFkZCh0aGlzLnZlbFxuICAgICAgICAgICAgLmNsb25lKClcbiAgICAgICAgICAgIC5tdWwobmV3IFZlY3RvcjIod2VhcG9uVHlwZXNbdGhpcy50eXBlXS5zcGVlZCAqIGR0LCB3ZWFwb25UeXBlc1t0aGlzLnR5cGVdLnNwZWVkICogZHQpKSk7XG4gICAgfVxuICAgIHJlbmRlcihyZW5kZXJlcikge1xuICAgICAgICByZW5kZXJlci5jdHguc2F2ZSgpO1xuICAgICAgICB0aGlzLmRlYnVnRHJhdyhyZW5kZXJlcik7XG4gICAgICAgIHJlbmRlcmVyLmN0eC5maWxsU3R5bGUgPSB3ZWFwb25UeXBlc1t0aGlzLnR5cGVdLmNvbG9yO1xuICAgICAgICByZW5kZXJlci5jdHguZmlsbFJlY3QodGhpcy5wb3MueCwgdGhpcy5wb3MueSwgMiwgMik7XG4gICAgICAgIHJlbmRlcmVyLmN0eC5yZXN0b3JlKCk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGVyc29uIGV4dGVuZHMgR2FtZU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocG9zLCBpZCkge1xuICAgICAgICBzdXBlcihwb3MsIGlkKTtcbiAgICAgICAgdGhpcy5zdGF0cyA9IG5ldyBTdGF0cygpO1xuICAgICAgICB0aGlzLmJ1bGxldHMgPSBbXTtcbiAgICAgICAgdGhpcy5wcmV2UG9zID0gbmV3IFZlY3RvcjIoMCwgMCk7XG4gICAgICAgIHRoaXMud2FzU2hvdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIG1vdmUoZGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMucHJldlBvcyA9IHRoaXMucG9zLmNsb25lKCk7XG4gICAgICAgIHRoaXMucG9zLmFkZChkaXJlY3Rpb24pO1xuICAgIH1cbiAgICBmaXJlKGRpcmVjdGlvbiwgZHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHMucmVjaGFyZ2VkID4gd2VhcG9uVHlwZXMuYmFzaWMucmVjaGFyZ2VUaW1lKSB7XG4gICAgICAgICAgICBsZXQgbGVmdEd1blBvcyA9IG5ldyBWZWN0b3IyKHRoaXMucG9zLngsIHRoaXMucG9zLnkgKyAxNik7XG4gICAgICAgICAgICBsZXQgcmlnaHRHdW5Qb3MgPSBuZXcgVmVjdG9yMih0aGlzLnBvcy54ICsgMTQsIHRoaXMucG9zLnkgKyAxNik7XG4gICAgICAgICAgICB0aGlzLndhc1Nob3QgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zcHJpdGVEaXJlY3Rpb24gPSBkaXJlY3Rpb24uY2xvbmUoKTtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24ueSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGxlZnRHdW5Qb3MgPSBuZXcgVmVjdG9yMih0aGlzLnBvcy54LCB0aGlzLnBvcy55KTtcbiAgICAgICAgICAgICAgICByaWdodEd1blBvcyA9IG5ldyBWZWN0b3IyKHRoaXMucG9zLngsIHRoaXMucG9zLnkgKyAxNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsZWZ0QnVsbGV0ID0gbmV3IEJ1bGxldChsZWZ0R3VuUG9zLCBkaXJlY3Rpb24sIFdlYXBvblR5cGUuQmFzaWMpO1xuICAgICAgICAgICAgdGhpcy5idWxsZXRzLnB1c2gobGVmdEJ1bGxldCk7XG4gICAgICAgICAgICBjb25zdCBidWxsZXQgPSBuZXcgQnVsbGV0KHJpZ2h0R3VuUG9zLCBkaXJlY3Rpb24sIFdlYXBvblR5cGUuQmFzaWMpO1xuICAgICAgICAgICAgdGhpcy5idWxsZXRzLnB1c2goYnVsbGV0KTtcbiAgICAgICAgICAgIHp6ZngoLi4uWywgLCA1MzcsIDAuMDIsIDAuMDIsIDAuMjIsIDEsIDEuNTksIC02Ljk4LCA0Ljk3XSk7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLnJlY2hhcmdlZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YXNTaG90ID0gZmFsc2U7XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICB0aGlzLnN0YXRzLnJlY2hhcmdlZCArPSBkdDtcbiAgICAgICAgdGhpcy5idWxsZXRzLmZvckVhY2goKGJ1bGxldCkgPT4ge1xuICAgICAgICAgICAgYnVsbGV0LnVwZGF0ZShkdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCBQZXJzb24sIHsgU3RhdHMgfSBmcm9tIFwiLi9wZXJzb25cIjtcbmltcG9ydCBzdGF0ZSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IHsgaXNPdXRPZlNjcmVlbiB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBQZXJzb24ge1xuICAgIGNvbnN0cnVjdG9yKHBvcykge1xuICAgICAgICBzdXBlcihwb3MsIFwicGxheWVyXCIpO1xuICAgICAgICB0aGlzLnN0YXRzID0gbmV3IFN0YXRzKCk7XG4gICAgICAgIHRoaXMuYnVsbGV0cyA9IFtdO1xuICAgICAgICB0aGlzLnJlY2hhcmdlZCA9IDA7XG4gICAgICAgIHRoaXMuaXNEaXNlbWJhcmtlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNpemUgPSBuZXcgVmVjdG9yMigxNiwgMTYpO1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5wcmV2UG9zID0gcG9zO1xuICAgICAgICB0aGlzLnN0YXRzLmhlYWx0aCA9IDUwO1xuICAgICAgICB0aGlzLnNwZWVkID0gMjtcbiAgICB9XG4gICAgbW92ZShkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5wcmV2UG9zID0gdGhpcy5wb3MuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5zcHJpdGVEaXJlY3Rpb24gPSBkaXJlY3Rpb24uY2xvbmUoKTtcbiAgICAgICAgY29uc3QgbmV3UG9zID0gdGhpcy5wb3NcbiAgICAgICAgICAgIC5jbG9uZSgpXG4gICAgICAgICAgICAuYWRkKGRpcmVjdGlvbi5tdWwobmV3IFZlY3RvcjIodGhpcy5zcGVlZCwgdGhpcy5zcGVlZCkpKTtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSA1MDtcbiAgICAgICAgaWYgKHRoaXMuaXNPdXRPZlBhcmVudChuZXdQb3MpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IG5ld1BvcztcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLnggPD0gZGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gdGhpcy5wcmV2UG9zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucG9zLnggKz0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLnkgPD0gZGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gdGhpcy5wcmV2UG9zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucG9zLnkgKz0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLmNsb25lKCkuYWRkKG5ldyBWZWN0b3IyKHRoaXMuc2l6ZS54LCAwKSkueCA+PVxuICAgICAgICAgICAgc3RhdGUuZ2FtZS5yZW5kZXJlci53aW5kb3dTaXplLndpZHRoIC0gNTApIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gdGhpcy5wcmV2UG9zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucG9zLnggLT0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9zLmNsb25lKCkuYWRkKG5ldyBWZWN0b3IyKDAsIHRoaXMuc2l6ZS55KSkueSA+PVxuICAgICAgICAgICAgc3RhdGUuZ2FtZS5yZW5kZXJlci53aW5kb3dTaXplLmhlaWdodCAtIDUwKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IHRoaXMucHJldlBvcztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnBvcy55IC09IHRoaXMuc3BlZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKHJlbmRlcmVyKSB7XG4gICAgICAgIGxldCBzcHJpdGVEaXJlY3Rpb24gPSBcIkRPV05cIjtcbiAgICAgICAgaWYgKHRoaXMuc3ByaXRlRGlyZWN0aW9uLnggPiAwKSB7XG4gICAgICAgICAgICBzcHJpdGVEaXJlY3Rpb24gPSBcIlJJR0hUXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zcHJpdGVEaXJlY3Rpb24ueCA8IDApIHtcbiAgICAgICAgICAgIHNwcml0ZURpcmVjdGlvbiA9IFwiTEVGVFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3ByaXRlRGlyZWN0aW9uLnkgPiAwKSB7XG4gICAgICAgICAgICBzcHJpdGVEaXJlY3Rpb24gPSBcIkRPV05cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnNwcml0ZURpcmVjdGlvbi55IDwgMCkge1xuICAgICAgICAgICAgc3ByaXRlRGlyZWN0aW9uID0gXCJVUFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLndhc1Nob3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNwcml0ZURpcmVjdGlvbi54ID4gMCkge1xuICAgICAgICAgICAgICAgIHNwcml0ZURpcmVjdGlvbiA9IFwiUklHSFRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNwcml0ZURpcmVjdGlvbi54IDwgMCkge1xuICAgICAgICAgICAgICAgIHNwcml0ZURpcmVjdGlvbiA9IFwiTEVGVFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3ByaXRlRGlyZWN0aW9uLnkgPiAwKSB7XG4gICAgICAgICAgICAgICAgc3ByaXRlRGlyZWN0aW9uID0gXCJET1dOXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zcHJpdGVEaXJlY3Rpb24ueSA8IDApIHtcbiAgICAgICAgICAgICAgICBzcHJpdGVEaXJlY3Rpb24gPSBcIlVQXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyZXIuY3R4LnNhdmUoKTtcbiAgICAgICAgcmVuZGVyZXIuZHJhd1Nwcml0ZShyZW5kZXJlci5zcHJpdGVTaGVldE1hcFtgUExBWUVSXyR7c3ByaXRlRGlyZWN0aW9ufWBdLngsIHJlbmRlcmVyLnNwcml0ZVNoZWV0TWFwW2BQTEFZRVJfJHtzcHJpdGVEaXJlY3Rpb259YF0ueSwgcmVuZGVyZXIuc3ByaXRlU2hlZXRNYXBbYFBMQVlFUl8ke3Nwcml0ZURpcmVjdGlvbn1gXS53LCByZW5kZXJlci5zcHJpdGVTaGVldE1hcFtgUExBWUVSXyR7c3ByaXRlRGlyZWN0aW9ufWBdLmgsIHRoaXMucG9zLngsIHRoaXMucG9zLnksIDE2LCAxNik7XG4gICAgICAgIHRoaXMuYnVsbGV0cy5mb3JFYWNoKChidWxsZXQpID0+IHtcbiAgICAgICAgICAgIGJ1bGxldC5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5idWxsZXRzID0gdGhpcy5idWxsZXRzLmZpbHRlcigoYnVsbGV0KSA9PiAhaXNPdXRPZlNjcmVlbihidWxsZXQsIHJlbmRlcmVyLmNhbnZhcy53aWR0aCwgcmVuZGVyZXIuY2FudmFzLmhlaWdodCkpO1xuICAgICAgICB0aGlzLmRlYnVnRHJhdyhyZW5kZXJlcik7XG4gICAgICAgIHJlbmRlcmVyLmN0eC5yZXN0b3JlKCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGlzQ29sbGlkZShhLCBiKSB7XG4gICAgcmV0dXJuIChhLnBvcy54IDwgYi5wb3MueCArIGIuc2l6ZS54ICYmXG4gICAgICAgIGEucG9zLnggKyBhLnNpemUueCA+IGIucG9zLnggJiZcbiAgICAgICAgYS5wb3MueSA8IGIucG9zLnkgKyBiLnNpemUueSAmJlxuICAgICAgICBhLnBvcy55ICsgYS5zaXplLnkgPiBiLnBvcy55KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc091dE9mU2NyZWVuKG9iaiwgd2lkdGgsIGhlaWdodCkge1xuICAgIHJldHVybiAob2JqLnBvcy54IDwgMCB8fFxuICAgICAgICBvYmoucG9zLnggPiB3aWR0aCB8fFxuICAgICAgICBvYmoucG9zLnkgPCAwIHx8XG4gICAgICAgIG9iai5wb3MueSA+IGhlaWdodCk7XG59XG4iLCJpbXBvcnQgR2FtZU9iamVjdCBmcm9tIFwiLi9nYW1lb2JqZWN0XCI7XG5pbXBvcnQgc3RhdGUgZnJvbSBcIi4vc3RhdGVcIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuL3ZlY3RvcjJcIjtcbmNvbnN0IHRpbGVzID0gW1xuICAgIHtcbiAgICAgICAgaWQ6IFwiZ3Jhc3NcIixcbiAgICAgICAgY29sbGlzaW9uOiBmYWxzZSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgaWQ6IFwiZ3Jhc3MyXCIsXG4gICAgICAgIGNvbGlpc2lvbjogZmFsc2UsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGlkOiBcImdyYXNzM1wiLFxuICAgICAgICBjb2xsaXNpb246IHRydWUsXG4gICAgfSxcbl07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY2VuZSBleHRlbmRzIEdhbWVPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKGxldmVsRGF0YSwgcGxheWVyKSB7XG4gICAgICAgIHN1cGVyKGxldmVsRGF0YS5wb3MsIFwic2NlbmVcIik7XG4gICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgICAgICB0aGlzLm1hcCA9IFtdO1xuICAgICAgICB0aGlzLnNpemUgPSBsZXZlbERhdGEuc2l6ZTtcbiAgICAgICAgdGhpcy5wb3MgPSBsZXZlbERhdGEucG9zO1xuICAgICAgICB0aGlzLm1hcCA9IGxldmVsRGF0YS5tYXAoKTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZChwbGF5ZXIpO1xuICAgICAgICB0aGlzLm1hcC5mb3JFYWNoKChfLCBpKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1hcFtpXSA9IE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSAqIHRpbGVzLmxlbmd0aCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRUaWxlKHBvcykge1xuICAgICAgICBjb25zdCB0aWxlU2l6ZSA9IDE2O1xuICAgICAgICByZXR1cm4gdGlsZXNbdGhpcy5tYXBbTWF0aC50cnVuYyhwb3MueCAvIHRpbGVTaXplKSArXG4gICAgICAgICAgICBNYXRoLnRydW5jKHBvcy55IC8gdGlsZVNpemUpICogKHRoaXMuc2l6ZS54IC8gdGlsZVNpemUpXV07XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICAvLyBjb2xsaWRlIHBsYXllciB3aXRoIG1hcFxuICAgICAgICAvL2lmICh0aGlzLmdldFRpbGUodGhpcy5wbGF5ZXIucG9zKT8uY29sbGlzaW9uKSB7XG4gICAgICAgIC8vICB0aGlzLnBsYXllci5wb3MgPSB0aGlzLnBsYXllci5wcmV2UG9zO1xuICAgICAgICAvL31cbiAgICAgICAgLy8gYWFiYiBjb2xsaXNpb25cbiAgICAgICAgLy90aGlzLm1hcC5mb3JFYWNoKChfLCBpKSA9PiB7XG4gICAgICAgIC8vICBjb25zdCB0aWxlU2l6ZSA9IDE2O1xuICAgICAgICAvLyAgY29uc3QgeSA9IChpICUgKHRoaXMuc2l6ZS54IC8gdGlsZVNpemUpKSAqIHRpbGVTaXplO1xuICAgICAgICAvLyAgY29uc3QgeCA9IE1hdGgudHJ1bmMoaSAvICh0aGlzLnNpemUueCAvIHRpbGVTaXplKSkgKiB0aWxlU2l6ZTtcbiAgICAgICAgLy8gIGNvbnN0IHRpbGUgPSB0aWxlc1t0aGlzLm1hcFtpXV07XG4gICAgICAgIC8vICBpZiAodGlsZS5jb2xsaXNpb24pIHtcbiAgICAgICAgLy8gICAgaWYgKFxuICAgICAgICAvLyAgICAgIHRoaXMucGxheWVyLnBvcy54IDwgeCArIHRpbGVTaXplICYmXG4gICAgICAgIC8vICAgICAgdGhpcy5wbGF5ZXIucG9zLnggKyB0aGlzLnBsYXllci5zaXplLnggPiB4ICYmXG4gICAgICAgIC8vICAgICAgdGhpcy5wbGF5ZXIucG9zLnkgPCB5ICsgdGlsZVNpemUgJiZcbiAgICAgICAgLy8gICAgICB0aGlzLnBsYXllci5wb3MueSArIHRoaXMucGxheWVyLnNpemUueSA+IHlcbiAgICAgICAgLy8gICAgKSB7XG4gICAgICAgIC8vICAgICAgdGhpcy5wbGF5ZXIucG9zID0gdGhpcy5wbGF5ZXIucHJldlBvcztcbiAgICAgICAgLy8gICAgfVxuICAgICAgICAvLyAgfVxuICAgICAgICAvL30pO1xuICAgICAgICAvLyBjaGVjayBpZiBjaGlsZCBpcyB2aXNpYmxlXG4gICAgICAgIGlmICh0aGlzLnBvcy54ICsgdGhpcy5zaXplLnggPCAwIHx8XG4gICAgICAgICAgICB0aGlzLnBvcy55ICsgdGhpcy5zaXplLnkgPCAwIHx8XG4gICAgICAgICAgICB0aGlzLnBvcy54ID4gc3RhdGUud2luZG93UmVzb2x1dGlvbi53aWR0aCB8fFxuICAgICAgICAgICAgdGhpcy5wb3MueSA+IHN0YXRlLndpbmRvd1Jlc29sdXRpb24uaGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgY2hpbGQudXBkYXRlKGR0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlck1hcChyZW5kZXJlcikge1xuICAgICAgICBjb25zdCB0aWxlU2l6ZSA9IDE2O1xuICAgICAgICAvLyBsYXllciAxXG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5zaXplLnggLyB0aWxlU2l6ZTsgeCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuc2l6ZS55IC8gdGlsZVNpemU7IHkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbGUgPSB0aWxlc1t0aGlzLm1hcFt4ICsgeSAqICh0aGlzLnNpemUueCAvIHRpbGVTaXplKV1dO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRpbGUgaXMgdmlzaWJsZVxuICAgICAgICAgICAgICAgIGlmICh4ICogdGlsZVNpemUgKyB0aGlzLnBvcy54ID4gc3RhdGUud2luZG93UmVzb2x1dGlvbi53aWR0aCB8fFxuICAgICAgICAgICAgICAgICAgICB5ICogdGlsZVNpemUgKyB0aGlzLnBvcy55ID4gc3RhdGUud2luZG93UmVzb2x1dGlvbi5oZWlnaHQgfHxcbiAgICAgICAgICAgICAgICAgICAgeCAqIHRpbGVTaXplICsgdGhpcy5wb3MueCArIHRpbGVTaXplIDwgMCB8fFxuICAgICAgICAgICAgICAgICAgICB5ICogdGlsZVNpemUgKyB0aGlzLnBvcy55ICsgdGlsZVNpemUgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSBuZXcgVmVjdG9yMih0aGlzLnBvcy54ICsgeCAqIHRpbGVTaXplLCB0aGlzLnBvcy55ICsgeSAqIHRpbGVTaXplKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5kcmF3VGlsZSh0aWxlLmlkLCBwb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcihyZW5kZXJlcikge1xuICAgICAgICB0aGlzLnJlbmRlck1hcChyZW5kZXJlcik7XG4gICAgICAgIHRoaXMucGxheWVyPy5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICBjaGlsZC5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWJ1Z0RyYXcocmVuZGVyZXIpO1xuICAgIH1cbn1cbiIsImltcG9ydCBHYW1lT2JqZWN0IGZyb20gXCIuL2dhbWVvYmplY3RcIjtcbmltcG9ydCBQZXJzb24gZnJvbSBcIi4vcGVyc29uXCI7XG5pbXBvcnQgUGxheWVyIGZyb20gXCIuL3BsYXllclwiO1xuaW1wb3J0IFNjZW5lIGZyb20gXCIuL3NjZW5lXCI7XG5pbXBvcnQgc3RhdGUgZnJvbSBcIi4vc3RhdGVcIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuL3ZlY3RvcjJcIjtcbmNvbnN0IGxldmVsRGF0YSA9IHtcbiAgICBzaXplOiBuZXcgVmVjdG9yMigxNiAqIDIwLCAxNiAqIDIwKSxcbiAgICBwb3M6IG5ldyBWZWN0b3IyKC0wLCAtMCksXG4gICAgbWFwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheSh0aGlzLnNpemUueCAqIHRoaXMuc2l6ZS55KS5maWxsKDApO1xuICAgIH0sXG59O1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGV2ZWwgZXh0ZW5kcyBHYW1lT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIobmV3IFZlY3RvcjIoMCwgMCksIFwibGV2ZWxcIik7XG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IFBsYXllcihuZXcgVmVjdG9yMihzdGF0ZS53aW5kb3dSZXNvbHV0aW9uLndpZHRoIC8gMiAtIDE2LCBzdGF0ZS53aW5kb3dSZXNvbHV0aW9uLmhlaWdodCAvIDIgLSAxNikpO1xuICAgICAgICB0aGlzLnNjZW5lID0gbmV3IFNjZW5lKGxldmVsRGF0YSwgdGhpcy5wbGF5ZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVuZW15ID0gbmV3IFBlcnNvbihuZXcgVmVjdG9yMih0aGlzLnBvcy54ICsgTWF0aC5yYW5kb20oKSAqIDEwMCwgdGhpcy5wb3MueSArIE1hdGgucmFuZG9tKCkgKiAxMDApLCBgZW5lbXlfJHtpfWApO1xuICAgICAgICAgICAgZW5lbXkuaWQgPSBcImVuZW15XCI7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLmFkZENoaWxkKGVuZW15KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgdGhpcy5zY2VuZT8udXBkYXRlKGR0KTtcbiAgICB9XG4gICAgYWRkU2NlbmUoc2NlbmUpIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIH1cbiAgICByZW5kZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5zY2VuZT8ucmVuZGVyKHJlbmRlcmVyKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVuZGVyZXIgZnJvbSBcIi4vcmVuZGVyZXJcIjtcbmNvbnN0IHBhbGV0dGUgPSB7XG4gICAgMHgwMDogXCIjMDAwMDAwXCIsXG4gICAgMHgwMTogXCIjZmZmZmZmXCIsXG4gICAgMHgwMjogXCIjNDlhYTEwXCIsXG4gICAgMHgwNDogXCIjYjIxMDMwXCIsXG59O1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVUlSZW5kZXJlciBleHRlbmRzIFJlbmRlcmVyIHtcbiAgICBwcm9ncmVzcyhwZXJjZW50LCB4LCB5LCB3aWR0aCA9IDEwLCBoZWlnaHQgPSA0KSB7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHBhbGV0dGVbMHgwMV07XG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KHggLSAyLCB5IC0gMiwgd2lkdGggKyA0LCBoZWlnaHQgKyA0KTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gcGFsZXR0ZVsweDAxXTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCArIHdpZHRoICsgMiwgeSArIDEsIDEsIDIpO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBwYWxldHRlWzB4MDBdO1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4IC0gMSwgeSAtIDEsIHdpZHRoICsgMiwgaGVpZ2h0ICsgMik7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHBhbGV0dGVbMHgwNF07XG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KHgsIHksIHdpZHRoLCA0KTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gcGFsZXR0ZVsweDAyXTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCwgeSwgcGVyY2VudCAvIHdpZHRoLCA0KTtcbiAgICB9XG4gICAgdGV4dCh0ZXh0LCB4LCB5LCBibGluayA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChibGluaykge1xuICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDMwMCkgJSAyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGV4dC5zcGxpdChcIlwiKS5mb3JFYWNoKChjaGFyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgdGhpcy5zcHJpdGVTaGVldE1hcFtjaGFyXS54LCB0aGlzLnNwcml0ZVNoZWV0TWFwW2NoYXJdLnksIHRoaXMuc3ByaXRlU2hlZXRNYXBbY2hhcl0udywgdGhpcy5zcHJpdGVTaGVldE1hcFtjaGFyXS5oLCBpbmRleCAqIDggKyB4LCB5LCA4LCA4KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRleHQuc3BsaXQoXCJcIikuZm9yRWFjaCgoY2hhciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgdGhpcy5zcHJpdGVTaGVldE1hcFtjaGFyXS54LCB0aGlzLnNwcml0ZVNoZWV0TWFwW2NoYXJdLnksIHRoaXMuc3ByaXRlU2hlZXRNYXBbY2hhcl0udywgdGhpcy5zcHJpdGVTaGVldE1hcFtjaGFyXS5oLCBpbmRleCAqIDggKyB4LCB5LCA4LCA4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IExldmVsIGZyb20gXCIuL2xldmVsXCI7XG5pbXBvcnQgUmVuZGVyZXIgZnJvbSBcIi4vcmVuZGVyZXJcIjtcbmltcG9ydCBVSVJlbmRlcmVyIGZyb20gXCIuL3VpLXJlbmRlcmVyXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5pbXBvcnQgeyB6emZ4IH0gZnJvbSBcInp6ZnhcIjtcbmV4cG9ydCBjbGFzcyBCYXNlU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7IH1cbiAgICByZW5kZXIocmVuZGVyZXIpIHsgfVxuICAgIHJlbmRlclVJKHVpUmVuZGVyZXIpIHsgfVxufVxuZXhwb3J0IGNsYXNzIEludHJvU3RhdGUgZXh0ZW5kcyBCYXNlU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgc3VwZXIoZ2FtZSk7XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICBpZiAodGhpcy5nYW1lLmNvbnRyb2xsZXIua2V5SXNEb3duKFwiRW50ZXJcIikpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGF0ZVN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgdGhpcy5nYW1lLnN0YXRlU3RhY2sucHVzaChuZXcgRmFkZVN0YXRlKHRoaXMuZ2FtZSwgeyByOiAwLCBnOiAwLCBiOiAwIH0sIDEwMDApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS51aVJlbmRlcmVyLnRleHQoXCJTUEFDRSBTSE9PVEVSIEdBSURFTlwiLCA0NSwgMzApO1xuICAgICAgICB0aGlzLmdhbWUudWlSZW5kZXJlci50ZXh0KFwiUFJFU1MgRU5URVJcIiwgODAsIDEyMCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZ2FtZS51aVJlbmRlcmVyLnRleHQoXCJXQVNEIC0gTU9WRSwgSUpLTCAtIEZJUkVcIiwgMzAsIDIyMCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIExvYWRpbmdTdGF0ZSBleHRlbmRzIEJhc2VTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZ2FtZSkge1xuICAgICAgICBzdXBlcihnYW1lKTtcbiAgICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICh0aGlzLmdhbWUuYXNzZXRMb2FkZXIubGlzdCkge1xuICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxvYWRlZCkge1xuICAgICAgICAgICAgdGhpcy5nYW1lLnN0YXRlU3RhY2sucG9wKCk7XG4gICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGVTdGFjay5wdXNoKG5ldyBQbGF5aW5nU3RhdGUodGhpcy5nYW1lKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmdhbWUudWlSZW5kZXJlci50ZXh0KFwiTE9BRElORy4uLlwiLCA4MCwgMTIwLCB0cnVlKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRmFkZVN0YXRlIGV4dGVuZHMgQmFzZVN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lLCBjb2xvciwgdGltZSkge1xuICAgICAgICBzdXBlcihnYW1lKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICAgICAgICB0aGlzLmxhc3RUaW1lID0gMDtcbiAgICAgICAgdGhpcy5hcGxoYSA9IDA7XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICB0aGlzLmxhc3RUaW1lICs9IGR0O1xuICAgICAgICBpZiAodGhpcy5sYXN0VGltZSA+IHRoaXMudGltZSkge1xuICAgICAgICAgICAgenpmeCguLi5bXG4gICAgICAgICAgICAgICAgMS42NixcbiAgICAgICAgICAgICAgICAsXG4gICAgICAgICAgICAgICAgMzIyLFxuICAgICAgICAgICAgICAgIDAuMDUsXG4gICAgICAgICAgICAgICAgMC4yNCxcbiAgICAgICAgICAgICAgICAwLjE5LFxuICAgICAgICAgICAgICAgICxcbiAgICAgICAgICAgICAgICAwLjUsXG4gICAgICAgICAgICAgICAgLFxuICAgICAgICAgICAgICAgIC0yMixcbiAgICAgICAgICAgICAgICA5MzUsXG4gICAgICAgICAgICAgICAgMC40MSxcbiAgICAgICAgICAgICAgICAwLjM1LFxuICAgICAgICAgICAgICAgIDAuMSxcbiAgICAgICAgICAgICAgICAsXG4gICAgICAgICAgICAgICAgLFxuICAgICAgICAgICAgICAgIDAuMjIsXG4gICAgICAgICAgICAgICAgMC43NyxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZhZGUgaW5cbiAgICAgICAgaWYgKHRoaXMubGFzdFRpbWUgPiB0aGlzLnRpbWUgLyAzKSB7XG4gICAgICAgICAgICB0aGlzLmFwbGhhID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXBsaGEgPSB0aGlzLmxhc3RUaW1lIC8gKHRoaXMudGltZSAvIDMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZhZGUgb3V0XG4gICAgICAgIGlmICh0aGlzLmxhc3RUaW1lID4gKHRoaXMudGltZSAvIDMpICogMikge1xuICAgICAgICAgICAgdGhpcy5hcGxoYSA9IDEgLSAodGhpcy5sYXN0VGltZSAtICh0aGlzLnRpbWUgLyAzKSAqIDIpIC8gKHRoaXMudGltZSAvIDMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxhc3RUaW1lID4gdGhpcy50aW1lKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGVTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGF0ZVN0YWNrLnB1c2gobmV3IFBsYXlpbmdTdGF0ZSh0aGlzLmdhbWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5yZW5kZXJlci5jdHguZmlsbFN0eWxlID0gYHJnYigke3RoaXMuY29sb3Iucn0sICR7dGhpcy5jb2xvci5nfSwgJHt0aGlzLmNvbG9yLmJ9LCAke3RoaXMuYXBsaGF9KWA7XG4gICAgICAgIHRoaXMuZ2FtZS5yZW5kZXJlci5jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5nYW1lLnJlbmRlcmVyLndpbmRvd1NpemUud2lkdGgsIHRoaXMuZ2FtZS5yZW5kZXJlci53aW5kb3dTaXplLmhlaWdodCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1lbnVTdGF0ZSBleHRlbmRzIEJhc2VTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZ2FtZSkge1xuICAgICAgICBzdXBlcihnYW1lKTtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICh0aGlzLmdhbWUuY29udHJvbGxlci5rZXlJc0Rvd24oXCJFc2NhcGVcIikpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGF0ZVN0YWNrLnBvcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5nYW1lLnVpUmVuZGVyZXIudGV4dChcIk1FTlVcIiwgODAsIDMwKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUGxheWluZ1N0YXRlIGV4dGVuZHMgQmFzZVN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XG4gICAgICAgIHN1cGVyKGdhbWUpO1xuICAgICAgICB0aGlzLmxldmVsID0gbmV3IExldmVsKCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyID0gbmV3IFVJUmVuZGVyZXIoKTtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICh0aGlzLmdhbWUuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlBXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5tb3ZlKG5ldyBWZWN0b3IyKC0xLCAwKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5jb250cm9sbGVyLmtleUlzRG93bihcIktleURcIikpIHtcbiAgICAgICAgICAgIHRoaXMubGV2ZWwucGxheWVyLm1vdmUobmV3IFZlY3RvcjIoMSwgMCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdhbWUuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlXXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5tb3ZlKG5ldyBWZWN0b3IyKDAsIC0xKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5jb250cm9sbGVyLmtleUlzRG93bihcIktleVNcIikpIHtcbiAgICAgICAgICAgIHRoaXMubGV2ZWwucGxheWVyLm1vdmUobmV3IFZlY3RvcjIoMCwgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdhbWUuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlJXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5maXJlKG5ldyBWZWN0b3IyKDAsIC0xKSwgZHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdhbWUuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlKXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5maXJlKG5ldyBWZWN0b3IyKC0xLCAwKSwgZHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdhbWUuY29udHJvbGxlci5rZXlJc0Rvd24oXCJLZXlLXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnBsYXllci5maXJlKG5ldyBWZWN0b3IyKDAsIDEpLCBkdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5jb250cm9sbGVyLmtleUlzRG93bihcIktleUxcIikpIHtcbiAgICAgICAgICAgIHRoaXMubGV2ZWwucGxheWVyLmZpcmUobmV3IFZlY3RvcjIoMSwgMCksIGR0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5nYW1lLmNvbnRyb2xsZXIua2V5SXNEb3duKFwiRXNjYXBlXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGVTdGFjay5wdXNoKG5ldyBNZW51U3RhdGUodGhpcy5nYW1lKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZXZlbC51cGRhdGUoZHQpO1xuICAgIH1cbiAgICByZW5kZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5nYW1lLnVpUmVuZGVyZXIucHJvZ3Jlc3ModGhpcy5sZXZlbC5wbGF5ZXIuc3RhdHMuaGVhbHRoLCB0aGlzLmdhbWUucmVuZGVyZXIud2luZG93U2l6ZS53aWR0aCAtIDI4LCA4KTtcbiAgICAgICAgdGhpcy5sZXZlbC5yZW5kZXIodGhpcy5nYW1lLnJlbmRlcmVyKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0ZVN0YWNrIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZXMgPSBbXTtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuc3RhdGVzID0gW107XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZXNbdGhpcy5zdGF0ZXMubGVuZ3RoIC0gMV0udXBkYXRlKGR0KTtcbiAgICB9XG4gICAgcmVuZGVyKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuc3RhdGVzLmZvckVhY2goKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHVzaChzdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlcy5wdXNoKHN0YXRlKTtcbiAgICB9XG4gICAgcG9wKCkge1xuICAgICAgICB0aGlzLnN0YXRlcy5wb3AoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgR2FtZSBmcm9tIFwiLi9nYW1lXCI7XG5jb25zdCBnYW1lID0gbmV3IEdhbWUoKTtcbmdhbWUucnVuKCk7XG4iLCJpbXBvcnQgQXNzZXRMb2FkZXIgZnJvbSBcIi4vYXNzZXRsb2FkZXJcIjtcbmltcG9ydCBDb250cm9sbGVyIGZyb20gXCIuL2NvbnRyb2xsZXJcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4vbG9nZ2VyXCI7XG5pbXBvcnQgUmVuZGVyZXIgZnJvbSBcIi4vcmVuZGVyZXJcIjtcbmltcG9ydCBTdGF0ZVN0YWNrLCB7IEludHJvU3RhdGUsIH0gZnJvbSBcIi4vc3RhdGUtc3RhY2tcIjtcbmltcG9ydCBVSVJlbmRlcmVyIGZyb20gXCIuL3VpLXJlbmRlcmVyXCI7XG5pbXBvcnQgc3RhdGUgZnJvbSBcIi4vc3RhdGVcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxhc3RUaW1lID0gMDtcbiAgICAgICAgdGhpcy5zZXRUaXRsZShcIlNwYWNlU2hvb3RlckdhaWRlblwiKTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKCk7XG4gICAgICAgIHRoaXMuc3RhdGVTdGFjayA9IG5ldyBTdGF0ZVN0YWNrKCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyID0gbmV3IFVJUmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy5hc3NldExvYWRlciA9IG5ldyBBc3NldExvYWRlcigpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHdpbmRvd1tcImdhbWVcIl0gPSB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodHMpIHtcbiAgICAgICAgY29uc3QgZHQgPSB0cyAtIHRoaXMubGFzdFRpbWU7XG4gICAgICAgIHRoaXMubGFzdFRpbWUgPSB0cztcbiAgICAgICAgdGhpcy5zdGF0ZVN0YWNrLnVwZGF0ZShkdCk7XG4gICAgfVxuICAgIHNldFRpdGxlKHRpdGxlKSB7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gdGl0bGU7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5jbGVhcigpO1xuICAgICAgICB0aGlzLnVpUmVuZGVyZXIuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZVN0YWNrLnJlbmRlcih0aGlzLnJlbmRlcmVyKTtcbiAgICB9XG4gICAgcnVuKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiR2FtZSBydW5uaW5nXCIpO1xuICAgICAgICB0aGlzLmFzc2V0TG9hZGVyXG4gICAgICAgICAgICAubG9hZChbXCJhc3NldHMvc3ByaXRlc2hlZXQucG5nXCIsIFwiYXNzZXRzL3Nwcml0ZXNoZWV0X21hcC5qc29uXCJdKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIkFzc2V0cyBsb2FkZWRcIik7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmltYWdlID0gdGhpcy5hc3NldExvYWRlci5saXN0W1wic3ByaXRlc2hlZXRcIl07XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNwcml0ZVNoZWV0TWFwID0gdGhpcy5hc3NldExvYWRlci5saXN0W1wic3ByaXRlc2hlZXRfbWFwXCJdO1xuICAgICAgICAgICAgdGhpcy51aVJlbmRlcmVyLmltYWdlID0gdGhpcy5hc3NldExvYWRlci5saXN0W1wic3ByaXRlc2hlZXRcIl07XG4gICAgICAgICAgICB0aGlzLnVpUmVuZGVyZXIuc3ByaXRlU2hlZXRNYXAgPSB0aGlzLmFzc2V0TG9hZGVyLmxpc3RbXCJzcHJpdGVzaGVldF9tYXBcIl07XG4gICAgICAgICAgICB0aGlzLnN0YXRlU3RhY2sucHVzaChuZXcgSW50cm9TdGF0ZSh0aGlzKSk7XG4gICAgICAgICAgICBzdGF0ZS5nYW1lID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMubG9vcCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbG9vcCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGUocGVyZm9ybWFuY2Uubm93KCkpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJBc3NldExvYWRlciIsImNvbnN0cnVjdG9yIiwidGhpcyIsInRvTG9hZCIsImxvYWRlZCIsImlzTG9hZGVkIiwibGlzdCIsImxvYWQiLCJhc3NldHMiLCJpbWFnZUV4dCIsImpzb25FeHQiLCJjb25maWdFeHQiLCJsZW5ndGgiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZvckVhY2giLCJhc3NldCIsImV4dGVuc2lvbiIsInNwbGl0IiwicG9wIiwiaW5jbHVkZXMiLCJsb2FkSW1hZ2UiLCJsb2FkSnNvbiIsImxvYWRDb25maWciLCJsb2FkSGFuZGxlciIsInNyYyIsImltYWdlIiwiSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwibmFtZSIsImFzeW5jIiwiZmV0Y2giLCJ0aGVuIiwiZGF0YSIsInRleHQiLCJjb25maWciLCJyZWR1Y2UiLCJvYmoiLCJzdHIiLCJrZXkiLCJ2YWx1ZSIsInRyaW0iLCJyZXNwb25zZSIsImpzb24iLCJlcnJvciIsImFwcHJvdmVkS2V5cyIsIkNvbnRyb2xsZXIiLCJrZXlzIiwiY29uc29sZSIsImxvZyIsIndpbmRvdyIsImUiLCJoYW5kbGVLZXlEb3duIiwiaGFuZGxlS2V5VXAiLCJjb2RlIiwicHJldmVudERlZmF1bHQiLCJrZXlJc0Rvd24iLCJjbGVhcktleXMiLCJMb2dnZXIiLCJtZXNzYWdlIiwid2FybiIsImluZm8iLCJkZWJ1ZyIsImdhbWUiLCJtb3ZlRGlzYWJsZWQiLCJ3aW5kb3dSZXNvbHV0aW9uIiwid2lkdGgiLCJoZWlnaHQiLCJSZW5kZXJlciIsImxvZ2dlciIsIndpbmRvd1NpemUiLCJzcHJpdGVTaGVldE1hcCIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJzY2FsZSIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBlbmQiLCJyZXNpemUiLCJkcmF3VGlsZSIsImlkIiwicG9zIiwieCIsInkiLCJ3IiwiaCIsImRyYXdTcHJpdGUiLCJ0aWxlWCIsInRpbGVZIiwic2l6ZVgiLCJzaXplWSIsImRyYXdJbWFnZSIsImNsZWFyIiwiY2xlYXJSZWN0IiwiVmVjdG9yMiIsImFkZCIsInYiLCJzdWIiLCJtdWwiLCJkaXYiLCJjbG9uZSIsInJlc2V0IiwiR2FtZU9iamVjdCIsImdsb2JhbFBvcyIsInZlbCIsInNpemUiLCJyb3RhdGlvbiIsInNwcml0ZURpcmVjdGlvbiIsInNwZWVkIiwiY2hpbGRyZW4iLCJwYXJlbnQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJhZGRDaGlsZCIsImNoaWxkIiwicmVtb3ZlQ2hpbGQiLCJwdXNoIiwiZmlsdGVyIiwiYyIsImRlYnVnRHJhdyIsInJlbmRlcmVyIiwic3Ryb2tlU3R5bGUiLCJzdHJva2VSZWN0IiwiZm9udCIsInN0cm9rZVRleHQiLCJ1cGRhdGUiLCJkdCIsInJlbmRlciIsImlzT3V0T2ZQYXJlbnQiLCJ6emZ4IiwicGFyYW1ldGVycyIsIlpaRlgiLCJwbGF5Iiwidm9sdW1lIiwic2FtcGxlUmF0ZSIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsInBsYXlTYW1wbGVzIiwiYnVpbGRTYW1wbGVzIiwic2FtcGxlcyIsImJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsInNvdXJjZSIsImNyZWF0ZUJ1ZmZlclNvdXJjZSIsIm1hcCIsImQiLCJpIiwiZ2V0Q2hhbm5lbERhdGEiLCJzZXQiLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJzdGFydCIsInJhbmRvbW5lc3MiLCJmcmVxdWVuY3kiLCJhdHRhY2siLCJzdXN0YWluIiwicmVsZWFzZSIsInNoYXBlIiwic2hhcGVDdXJ2ZSIsInNsaWRlIiwiZGVsdGFTbGlkZSIsInBpdGNoSnVtcCIsInBpdGNoSnVtcFRpbWUiLCJyZXBlYXRUaW1lIiwibm9pc2UiLCJtb2R1bGF0aW9uIiwiYml0Q3J1c2giLCJkZWxheSIsInN1c3RhaW5Wb2x1bWUiLCJkZWNheSIsInRyZW1vbG8iLCJQSTIiLCJQSSIsImYiLCJzdGFydFNsaWRlIiwic3RhcnRGcmVxdWVuY3kiLCJiIiwidCIsInRtIiwiaiIsInIiLCJzIiwic2luIiwibWF4IiwibWluIiwidGFuIiwiYWJzIiwicm91bmQiLCJjb3MiLCJnZXROb3RlIiwic2VtaXRvbmVPZmZzZXQiLCJyb290Tm90ZUZyZXF1ZW5jeSIsIndlYXBvblR5cGVzIiwiYmFzaWMiLCJkYW1hZ2UiLCJjb2xvciIsInJlY2hhcmdlVGltZSIsIldlYXBvblR5cGUiLCJTdGF0cyIsImhlYWx0aCIsImV4cCIsImxldmVsIiwiZGVmZW5zZSIsInJlY2hhcmdlZCIsIkJ1bGxldCIsInR5cGUiLCJzdXBlciIsInNhdmUiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsInJlc3RvcmUiLCJQZXJzb24iLCJzdGF0cyIsImJ1bGxldHMiLCJwcmV2UG9zIiwid2FzU2hvdCIsIm1vdmUiLCJkaXJlY3Rpb24iLCJmaXJlIiwibGVmdEd1blBvcyIsInJpZ2h0R3VuUG9zIiwibGVmdEJ1bGxldCIsIkJhc2ljIiwiYnVsbGV0IiwiUGxheWVyIiwiaXNEaXNlbWJhcmtlZCIsIm5ld1BvcyIsInRpbGVzIiwiY29sbGlzaW9uIiwiY29saWlzaW9uIiwiU2NlbmUiLCJsZXZlbERhdGEiLCJwbGF5ZXIiLCJfIiwidHJ1bmMiLCJnZXRUaWxlIiwicmVuZGVyTWFwIiwidGlsZVNpemUiLCJ0aWxlIiwiQXJyYXkiLCJmaWxsIiwiTGV2ZWwiLCJzY2VuZSIsImVuZW15IiwiYWRkU2NlbmUiLCJwYWxldHRlIiwiVUlSZW5kZXJlciIsInByb2dyZXNzIiwicGVyY2VudCIsImJsaW5rIiwiZmxvb3IiLCJEYXRlIiwibm93IiwiY2hhciIsImluZGV4IiwiQmFzZVN0YXRlIiwicmVuZGVyVUkiLCJ1aVJlbmRlcmVyIiwiSW50cm9TdGF0ZSIsImNvbnRyb2xsZXIiLCJzdGF0ZVN0YWNrIiwiRmFkZVN0YXRlIiwiZyIsInRpbWUiLCJsYXN0VGltZSIsImFwbGhhIiwiUGxheWluZ1N0YXRlIiwiTWVudVN0YXRlIiwiU3RhdGVTdGFjayIsInN0YXRlcyIsInN0YXRlIiwic2V0VGl0bGUiLCJhc3NldExvYWRlciIsInRzIiwidGl0bGUiLCJydW4iLCJsb29wIiwicGVyZm9ybWFuY2UiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiXSwic291cmNlUm9vdCI6IiJ9